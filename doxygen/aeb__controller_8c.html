<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>AEB Controller: src/aeb_controller.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">AEB Controller<span id="projectnumber">&#160;1.3.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">aeb_controller.c File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Implements the main logic for the Autonomous Emergency Braking (AEB) controller system.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;unistd.h&gt;</code><br />
<code>#include &lt;pthread.h&gt;</code><br />
<code>#include &lt;stdbool.h&gt;</code><br />
<code>#include &lt;time.h&gt;</code><br />
<code>#include &quot;<a class="el" href="constants_8h_source.html">constants.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="mq__utils_8h_source.html">mq_utils.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="sensors__input_8h_source.html">sensors_input.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="dbc_8h_source.html">dbc.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="actuators_8h_source.html">actuators.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="ttc__control_8h_source.html">ttc_control.h</a>&quot;</code><br />
</div><div class="textblock"><div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Include dependency graph for aeb_controller.c:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="aeb__controller_8c__incl.png" border="0" usemap="#asrc_2aeb__controller_8c" alt=""/></div>
<map name="asrc_2aeb__controller_8c" id="asrc_2aeb__controller_8c">
<area shape="rect" title="Implements the main logic for the Autonomous Emergency Braking (AEB) controller system." alt="" coords="490,5,638,31"/>
<area shape="rect" title=" " alt="" coords="5,79,72,104"/>
<area shape="poly" title=" " alt="" coords="490,28,310,48,86,81,85,76,309,42,490,23"/>
<area shape="rect" title=" " alt="" coords="97,79,167,104"/>
<area shape="poly" title=" " alt="" coords="490,32,351,52,181,81,180,76,350,47,489,26"/>
<area shape="rect" title=" " alt="" coords="192,79,267,104"/>
<area shape="poly" title=" " alt="" coords="508,33,281,81,280,76,507,28"/>
<area shape="rect" title=" " alt="" coords="291,79,375,104"/>
<area shape="poly" title=" " alt="" coords="528,33,384,77,383,72,526,28"/>
<area shape="rect" title=" " alt="" coords="721,152,804,177"/>
<area shape="poly" title=" " alt="" coords="598,28,643,48,690,77,723,108,749,139,745,142,719,111,686,81,640,53,595,33"/>
<area shape="rect" title=" " alt="" coords="381,152,445,177"/>
<area shape="poly" title=" " alt="" coords="519,33,477,51,458,64,441,80,425,109,418,138,413,137,420,107,437,77,454,60,475,47,517,28"/>
<area shape="rect" href="constants_8h.html" title="Defines constants and calibration values for the AEB system." alt="" coords="578,79,675,104"/>
<area shape="poly" title=" " alt="" coords="576,29,609,66,605,70,572,33"/>
<area shape="rect" href="mq__utils_8h.html" title=" " alt="" coords="1069,79,1160,104"/>
<area shape="poly" title=" " alt="" coords="639,24,826,46,1051,76,1056,77,1055,82,1050,81,825,51,638,30"/>
<area shape="rect" href="dbc_8h.html" title="Defines CAN message identifiers, calibration values, and resolution factors based on the DBC specific..." alt="" coords="997,152,1054,177"/>
<area shape="poly" title=" " alt="" coords="638,17,736,20,845,29,943,47,982,60,1008,77,1019,90,1025,106,1030,137,1024,138,1020,107,1014,93,1005,81,979,65,942,52,844,34,736,25,638,22"/>
<area shape="rect" href="sensors__input_8h.html" title="Defines the data structure for sensor inputs to the AEB system." alt="" coords="751,79,875,104"/>
<area shape="poly" title=" " alt="" coords="605,28,760,72,759,77,603,33"/>
<area shape="rect" href="actuators_8h.html" title=" " alt="" coords="899,79,994,104"/>
<area shape="poly" title=" " alt="" coords="628,28,887,76,886,81,627,33"/>
<area shape="rect" href="ttc__control_8h.html" title=" " alt="" coords="451,79,554,104"/>
<area shape="poly" title=" " alt="" coords="556,33,524,70,520,66,552,29"/>
<area shape="rect" title=" " alt="" coords="1078,152,1165,177"/>
<area shape="poly" title=" " alt="" coords="1118,104,1122,138,1116,139,1113,105"/>
<area shape="poly" title=" " alt="" coords="1102,106,1052,145,1049,141,1099,102"/>
<area shape="rect" title=" " alt="" coords="990,225,1061,251"/>
<area shape="poly" title=" " alt="" coords="1028,178,1028,212,1023,212,1023,178"/>
<area shape="poly" title=" " alt="" coords="807,106,781,142,777,139,803,103"/>
<area shape="poly" title=" " alt="" coords="918,107,807,149,805,144,916,102"/>
<area shape="poly" title=" " alt="" coords="961,102,1004,141,1001,145,958,106"/>
<area shape="poly" title=" " alt="" coords="545,101,709,146,707,151,544,107"/>
<area shape="poly" title=" " alt="" coords="490,106,440,145,437,141,487,102"/>
<area shape="rect" title=" " alt="" coords="470,152,538,177"/>
<area shape="poly" title=" " alt="" coords="506,104,506,138,501,139,500,104"/>
</map>
</div>
</div>
<p><a href="aeb__controller_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ab0b4f8f98c3eb2f7041948c148ceadf8" id="r_ab0b4f8f98c3eb2f7041948c148ceadf8"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="aeb__controller_8c.html#ab0b4f8f98c3eb2f7041948c148ceadf8">LOOP_EMPTY_ITERATIONS_MAX</a>&#160;&#160;&#160;11</td></tr>
<tr class="separator:ab0b4f8f98c3eb2f7041948c148ceadf8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="enum-members" name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a60d56dbca0466eb23ba7c109132a5928" id="r_a60d56dbca0466eb23ba7c109132a5928"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="aeb__controller_8c.html#a60d56dbca0466eb23ba7c109132a5928">aeb_controller_state</a> { <a class="el" href="aeb__controller_8c.html#a60d56dbca0466eb23ba7c109132a5928ae454b2a27eae83a0c57bd2ffde66e09a">AEB_STATE_ACTIVE</a>
, <a class="el" href="aeb__controller_8c.html#a60d56dbca0466eb23ba7c109132a5928a06edf6bb0f2816cbb0074c27d62e81d4">AEB_STATE_ALARM</a>
, <a class="el" href="aeb__controller_8c.html#a60d56dbca0466eb23ba7c109132a5928a9f92c5be6a496ec11dcc37a5740b8bfa">AEB_STATE_BRAKE</a>
, <a class="el" href="aeb__controller_8c.html#a60d56dbca0466eb23ba7c109132a5928a6d038f8cafa588e741d3b930b758b775">AEB_STATE_STANDBY</a>
 }</td></tr>
<tr class="memdesc:a60d56dbca0466eb23ba7c109132a5928"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enum defining the possible states of the AEB system. Abstraction according to [SwR-12] (<a class="el" href="software_requirements.html#SwR-12">SwR-12</a>)  <a href="aeb__controller_8c.html#a60d56dbca0466eb23ba7c109132a5928">More...</a><br /></td></tr>
<tr class="separator:a60d56dbca0466eb23ba7c109132a5928"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a75689aa11501c348bd09370b739bf2e5" id="r_a75689aa11501c348bd09370b739bf2e5"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="aeb__controller_8c.html#a75689aa11501c348bd09370b739bf2e5">mainWorkingLoop</a> (void *arg)</td></tr>
<tr class="memdesc:a75689aa11501c348bd09370b739bf2e5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Main loop for the AEB controller that processes sensor data and makes decisions.  <br /></td></tr>
<tr class="separator:a75689aa11501c348bd09370b739bf2e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1243268c621c2049a41956ccfc934fd5" id="r_a1243268c621c2049a41956ccfc934fd5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="aeb__controller_8c.html#a1243268c621c2049a41956ccfc934fd5">print_info</a> ()</td></tr>
<tr class="memdesc:a1243268c621c2049a41956ccfc934fd5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prints debug information about the AEB system's internal state.  <br /></td></tr>
<tr class="separator:a1243268c621c2049a41956ccfc934fd5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa981d9343b3eb6ab97a07e44dc0e9db5" id="r_aa981d9343b3eb6ab97a07e44dc0e9db5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="aeb__controller_8c.html#aa981d9343b3eb6ab97a07e44dc0e9db5">translateAndCallCanMsg</a> (<a class="el" href="structcan__msg.html">can_msg</a> captured_frame)</td></tr>
<tr class="memdesc:aa981d9343b3eb6ab97a07e44dc0e9db5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Translates the received CAN message and calls the appropriate handler function based on the message identifier.  <br /></td></tr>
<tr class="separator:aa981d9343b3eb6ab97a07e44dc0e9db5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ba2245e7d2117f6190d0687e1d9beb0" id="r_a6ba2245e7d2117f6190d0687e1d9beb0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="aeb__controller_8c.html#a6ba2245e7d2117f6190d0687e1d9beb0">updateInternalPedalsState</a> (<a class="el" href="structcan__msg.html">can_msg</a> captured_frame)</td></tr>
<tr class="memdesc:a6ba2245e7d2117f6190d0687e1d9beb0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates the internal state for the brake and accelerator pedals from the received CAN message.  <br /></td></tr>
<tr class="separator:a6ba2245e7d2117f6190d0687e1d9beb0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac1567ee14cae1132278047c889744010" id="r_ac1567ee14cae1132278047c889744010"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="aeb__controller_8c.html#ac1567ee14cae1132278047c889744010">updateInternalSpeedState</a> (<a class="el" href="structcan__msg.html">can_msg</a> captured_frame)</td></tr>
<tr class="memdesc:ac1567ee14cae1132278047c889744010"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates the internal speed state based on the received CAN message.  <br /></td></tr>
<tr class="separator:ac1567ee14cae1132278047c889744010"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6abe9c41325ac131ce28c7922cc509bf" id="r_a6abe9c41325ac131ce28c7922cc509bf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="aeb__controller_8c.html#a6abe9c41325ac131ce28c7922cc509bf">updateInternalObstacleState</a> (<a class="el" href="structcan__msg.html">can_msg</a> captured_frame)</td></tr>
<tr class="memdesc:a6abe9c41325ac131ce28c7922cc509bf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates the internal obstacle state based on the received CAN message.  <br /></td></tr>
<tr class="separator:a6abe9c41325ac131ce28c7922cc509bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0385dbe57c403b31fa857cced3197a0e" id="r_a0385dbe57c403b31fa857cced3197a0e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="aeb__controller_8c.html#a0385dbe57c403b31fa857cced3197a0e">updateInternalCarCState</a> (<a class="el" href="structcan__msg.html">can_msg</a> captured_frame)</td></tr>
<tr class="memdesc:a0385dbe57c403b31fa857cced3197a0e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates the internal car state based on the received CAN message.  <br /></td></tr>
<tr class="separator:a0385dbe57c403b31fa857cced3197a0e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a46c3844253eb536d7b9f4a47d0b0e828" id="r_a46c3844253eb536d7b9f4a47d0b0e828"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structcan__msg.html">can_msg</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="aeb__controller_8c.html#a46c3844253eb536d7b9f4a47d0b0e828">updateCanMsgOutput</a> (<a class="el" href="aeb__controller_8c.html#a60d56dbca0466eb23ba7c109132a5928">aeb_controller_state</a> state)</td></tr>
<tr class="memdesc:a46c3844253eb536d7b9f4a47d0b0e828"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generates the appropriate CAN message for the AEB system state.  <br /></td></tr>
<tr class="separator:a46c3844253eb536d7b9f4a47d0b0e828"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a56109d8ed6dda45e79e36b2bc4c42360" id="r_a56109d8ed6dda45e79e36b2bc4c42360"><td class="memItemLeft" align="right" valign="top"><a class="el" href="aeb__controller_8c.html#a60d56dbca0466eb23ba7c109132a5928">aeb_controller_state</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="aeb__controller_8c.html#a56109d8ed6dda45e79e36b2bc4c42360">getAEBState</a> (<a class="el" href="structsensors__input__data.html">sensors_input_data</a> <a class="el" href="aeb__controller_8c.html#a15b2dc1261c867c309a53e7342596884">aeb_internal_state</a>, double ttc)</td></tr>
<tr class="memdesc:a56109d8ed6dda45e79e36b2bc4c42360"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determines the current state of the AEB system based on sensor input and TTC.  <br /></td></tr>
<tr class="separator:a56109d8ed6dda45e79e36b2bc4c42360"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae66f6b31b5ad750f1fe042a706a4e3d4" id="r_ae66f6b31b5ad750f1fe042a706a4e3d4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="aeb__controller_8c.html#ae66f6b31b5ad750f1fe042a706a4e3d4">main</a> ()</td></tr>
<tr class="memdesc:ae66f6b31b5ad750f1fe042a706a4e3d4"><td class="mdescLeft">&#160;</td><td class="mdescRight">The main entry point of the AEB (Autonomous Emergency Braking) controller system.  <br /></td></tr>
<tr class="separator:ae66f6b31b5ad750f1fe042a706a4e3d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a074b0ef9bc31934bbf9b2b54e9e9aa43" id="r_a074b0ef9bc31934bbf9b2b54e9e9aa43"><td class="memItemLeft" align="right" valign="top">mqd_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="aeb__controller_8c.html#a074b0ef9bc31934bbf9b2b54e9e9aa43">sensors_mq</a></td></tr>
<tr class="separator:a074b0ef9bc31934bbf9b2b54e9e9aa43"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a888ff70e2de4c8fbaedc5134dbe2a441" id="r_a888ff70e2de4c8fbaedc5134dbe2a441"><td class="memItemLeft" align="right" valign="top">mqd_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="aeb__controller_8c.html#a888ff70e2de4c8fbaedc5134dbe2a441">actuators_mq</a></td></tr>
<tr class="separator:a888ff70e2de4c8fbaedc5134dbe2a441"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31be80dc3d658ca7ba3be24962aed6d4" id="r_a31be80dc3d658ca7ba3be24962aed6d4"><td class="memItemLeft" align="right" valign="top">pthread_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="aeb__controller_8c.html#a31be80dc3d658ca7ba3be24962aed6d4">aeb_controller_id</a></td></tr>
<tr class="separator:a31be80dc3d658ca7ba3be24962aed6d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a15b2dc1261c867c309a53e7342596884" id="r_a15b2dc1261c867c309a53e7342596884"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structsensors__input__data.html">sensors_input_data</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="aeb__controller_8c.html#a15b2dc1261c867c309a53e7342596884">aeb_internal_state</a></td></tr>
<tr class="separator:a15b2dc1261c867c309a53e7342596884"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d2051893d3d3ea4e0dcc3c647770c95" id="r_a5d2051893d3d3ea4e0dcc3c647770c95"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structcan__msg.html">can_msg</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="aeb__controller_8c.html#a5d2051893d3d3ea4e0dcc3c647770c95">captured_can_frame</a></td></tr>
<tr class="separator:a5d2051893d3d3ea4e0dcc3c647770c95"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4847c169e96fc59553ca7c852cc004d6" id="r_a4847c169e96fc59553ca7c852cc004d6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structcan__msg.html">can_msg</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="aeb__controller_8c.html#a4847c169e96fc59553ca7c852cc004d6">out_can_frame</a></td></tr>
<tr class="separator:a4847c169e96fc59553ca7c852cc004d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae6763c5f7a5772f4680437dee47e8954" id="r_ae6763c5f7a5772f4680437dee47e8954"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structcan__msg.html">can_msg</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="aeb__controller_8c.html#ae6763c5f7a5772f4680437dee47e8954">empty_msg</a></td></tr>
<tr class="memdesc:ae6763c5f7a5772f4680437dee47e8954"><td class="mdescLeft">&#160;</td><td class="mdescRight">[SwR-5] (<a class="el" href="software_requirements.html#SwR-5">SwR-5</a>)  <br /></td></tr>
<tr class="separator:ae6763c5f7a5772f4680437dee47e8954"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Implements the main logic for the Autonomous Emergency Braking (AEB) controller system. </p>
<p>This file contains the core implementation of the AEB controller, including the main control loop, message handling, state management, and CAN message translation logic. It interfaces with sensors via message queues, processes data (e.g., velocity, obstacles, pedal inputs), and makes decisions based on TTC (Time to Collision) to control actuators accordingly.</p>
<p>The controller supports multiple operating states such as standby, active, alarm, and brake, and ensures safe and timely actuation decisions based on vehicle and environmental data. </p>

<p class="definition">Definition in file <a class="el" href="aeb__controller_8c_source.html">aeb_controller.c</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ab0b4f8f98c3eb2f7041948c148ceadf8" name="ab0b4f8f98c3eb2f7041948c148ceadf8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab0b4f8f98c3eb2f7041948c148ceadf8">&#9670;&#160;</a></span>LOOP_EMPTY_ITERATIONS_MAX</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LOOP_EMPTY_ITERATIONS_MAX&#160;&#160;&#160;11</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="aeb__controller_8c_source.html#l00029">29</a> of file <a class="el" href="aeb__controller_8c_source.html">aeb_controller.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="a60d56dbca0466eb23ba7c109132a5928" name="a60d56dbca0466eb23ba7c109132a5928"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a60d56dbca0466eb23ba7c109132a5928">&#9670;&#160;</a></span>aeb_controller_state</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="aeb__controller_8c.html#a60d56dbca0466eb23ba7c109132a5928">aeb_controller_state</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enum defining the possible states of the AEB system. Abstraction according to [SwR-12] (<a class="el" href="software_requirements.html#SwR-12">SwR-12</a>) </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a60d56dbca0466eb23ba7c109132a5928ae454b2a27eae83a0c57bd2ffde66e09a" name="a60d56dbca0466eb23ba7c109132a5928ae454b2a27eae83a0c57bd2ffde66e09a"></a>AEB_STATE_ACTIVE&#160;</td><td class="fielddoc"><p>AEB system is active and performing actions </p>
</td></tr>
<tr><td class="fieldname"><a id="a60d56dbca0466eb23ba7c109132a5928a06edf6bb0f2816cbb0074c27d62e81d4" name="a60d56dbca0466eb23ba7c109132a5928a06edf6bb0f2816cbb0074c27d62e81d4"></a>AEB_STATE_ALARM&#160;</td><td class="fielddoc"><p>AEB system is in alarm state, but not yet braking </p>
</td></tr>
<tr><td class="fieldname"><a id="a60d56dbca0466eb23ba7c109132a5928a9f92c5be6a496ec11dcc37a5740b8bfa" name="a60d56dbca0466eb23ba7c109132a5928a9f92c5be6a496ec11dcc37a5740b8bfa"></a>AEB_STATE_BRAKE&#160;</td><td class="fielddoc"><p>AEB system is actively braking the vehicle </p>
</td></tr>
<tr><td class="fieldname"><a id="a60d56dbca0466eb23ba7c109132a5928a6d038f8cafa588e741d3b930b758b775" name="a60d56dbca0466eb23ba7c109132a5928a6d038f8cafa588e741d3b930b758b775"></a>AEB_STATE_STANDBY&#160;</td><td class="fielddoc"><p>AEB system is in standby, waiting for data or conditions </p>
</td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="aeb__controller_8c_source.html#l00036">36</a> of file <a class="el" href="aeb__controller_8c_source.html">aeb_controller.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   37</span>{</div>
<div class="line"><span class="lineno">   38</span>    <a class="code hl_enumvalue" href="aeb__controller_8c.html#a60d56dbca0466eb23ba7c109132a5928ae454b2a27eae83a0c57bd2ffde66e09a">AEB_STATE_ACTIVE</a>, </div>
<div class="line"><span class="lineno">   39</span>    <a class="code hl_enumvalue" href="aeb__controller_8c.html#a60d56dbca0466eb23ba7c109132a5928a06edf6bb0f2816cbb0074c27d62e81d4">AEB_STATE_ALARM</a>,  </div>
<div class="line"><span class="lineno">   40</span>    <a class="code hl_enumvalue" href="aeb__controller_8c.html#a60d56dbca0466eb23ba7c109132a5928a9f92c5be6a496ec11dcc37a5740b8bfa">AEB_STATE_BRAKE</a>,  </div>
<div class="line"><span class="lineno">   41</span>    <a class="code hl_enumvalue" href="aeb__controller_8c.html#a60d56dbca0466eb23ba7c109132a5928a6d038f8cafa588e741d3b930b758b775">AEB_STATE_STANDBY</a> </div>
<div class="line"><span class="lineno">   42</span>} <a class="code hl_enumeration" href="aeb__controller_8c.html#a60d56dbca0466eb23ba7c109132a5928">aeb_controller_state</a>;</div>
<div class="ttc" id="aaeb__controller_8c_html_a60d56dbca0466eb23ba7c109132a5928"><div class="ttname"><a href="aeb__controller_8c.html#a60d56dbca0466eb23ba7c109132a5928">aeb_controller_state</a></div><div class="ttdeci">aeb_controller_state</div><div class="ttdoc">Enum defining the possible states of the AEB system. Abstraction according to [SwR-12] (SwR-12)</div><div class="ttdef"><b>Definition</b> <a href="aeb__controller_8c_source.html#l00036">aeb_controller.c:37</a></div></div>
<div class="ttc" id="aaeb__controller_8c_html_a60d56dbca0466eb23ba7c109132a5928a06edf6bb0f2816cbb0074c27d62e81d4"><div class="ttname"><a href="aeb__controller_8c.html#a60d56dbca0466eb23ba7c109132a5928a06edf6bb0f2816cbb0074c27d62e81d4">AEB_STATE_ALARM</a></div><div class="ttdeci">@ AEB_STATE_ALARM</div><div class="ttdef"><b>Definition</b> <a href="aeb__controller_8c_source.html#l00039">aeb_controller.c:39</a></div></div>
<div class="ttc" id="aaeb__controller_8c_html_a60d56dbca0466eb23ba7c109132a5928a6d038f8cafa588e741d3b930b758b775"><div class="ttname"><a href="aeb__controller_8c.html#a60d56dbca0466eb23ba7c109132a5928a6d038f8cafa588e741d3b930b758b775">AEB_STATE_STANDBY</a></div><div class="ttdeci">@ AEB_STATE_STANDBY</div><div class="ttdef"><b>Definition</b> <a href="aeb__controller_8c_source.html#l00042">aeb_controller.c:41</a></div></div>
<div class="ttc" id="aaeb__controller_8c_html_a60d56dbca0466eb23ba7c109132a5928a9f92c5be6a496ec11dcc37a5740b8bfa"><div class="ttname"><a href="aeb__controller_8c.html#a60d56dbca0466eb23ba7c109132a5928a9f92c5be6a496ec11dcc37a5740b8bfa">AEB_STATE_BRAKE</a></div><div class="ttdeci">@ AEB_STATE_BRAKE</div><div class="ttdef"><b>Definition</b> <a href="aeb__controller_8c_source.html#l00040">aeb_controller.c:40</a></div></div>
<div class="ttc" id="aaeb__controller_8c_html_a60d56dbca0466eb23ba7c109132a5928ae454b2a27eae83a0c57bd2ffde66e09a"><div class="ttname"><a href="aeb__controller_8c.html#a60d56dbca0466eb23ba7c109132a5928ae454b2a27eae83a0c57bd2ffde66e09a">AEB_STATE_ACTIVE</a></div><div class="ttdeci">@ AEB_STATE_ACTIVE</div><div class="ttdef"><b>Definition</b> <a href="aeb__controller_8c_source.html#l00038">aeb_controller.c:38</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a56109d8ed6dda45e79e36b2bc4c42360" name="a56109d8ed6dda45e79e36b2bc4c42360"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a56109d8ed6dda45e79e36b2bc4c42360">&#9670;&#160;</a></span>getAEBState()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="aeb__controller_8c.html#a60d56dbca0466eb23ba7c109132a5928">aeb_controller_state</a> getAEBState </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structsensors__input__data.html">sensors_input_data</a>&#160;</td>
          <td class="paramname"><em>aeb_internal_state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>ttc</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Determines the current state of the AEB system based on sensor input and TTC. </p>
<p>This function evaluates the current AEB state based on multiple sensor parameters, such as relative velocity, obstacle presence, and TTC (Time to Collision).</p>
<p>Requirements [SwR-7] (<a class="el" href="software_requirements.html#SwR-7">SwR-7</a>), [SwR-8] (<a class="el" href="software_requirements.html#SwR-8">SwR-8</a>), [SwR-12] (<a class="el" href="software_requirements.html#SwR-12">SwR-12</a>) and [SwR-16] (<a class="el" href="software_requirements.html#SwR-16">SwR-16</a>)</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">aeb_internal_state</td><td>The current sensor data for the AEB system. </td></tr>
    <tr><td class="paramname">ttc</td><td>The time-to-collision value, calculated based on obstacle distance and vehicle speed. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The current AEB state. </dd></dl>

<p class="definition">Definition at line <a class="el" href="aeb__controller_8c_source.html#l00451">451</a> of file <a class="el" href="aeb__controller_8c_source.html">aeb_controller.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  452</span>{</div>
<div class="line"><span class="lineno">  453</span>    <a class="code hl_enumeration" href="aeb__controller_8c.html#a60d56dbca0466eb23ba7c109132a5928">aeb_controller_state</a> my_new_state = <a class="code hl_enumvalue" href="aeb__controller_8c.html#a60d56dbca0466eb23ba7c109132a5928ae454b2a27eae83a0c57bd2ffde66e09a">AEB_STATE_ACTIVE</a>;</div>
<div class="line"><span class="lineno">  454</span> </div>
<div class="line"><span class="lineno">  455</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="aeb__controller_8c.html#a15b2dc1261c867c309a53e7342596884">aeb_internal_state</a>.<a class="code hl_variable" href="structsensors__input__data.html#ae89dc450cae9cb5131b7c1eee277b71e">aeb_system_enabled</a> == <span class="keyword">false</span>)</div>
<div class="line"><span class="lineno">  456</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="aeb__controller_8c.html#a60d56dbca0466eb23ba7c109132a5928a6d038f8cafa588e741d3b930b758b775">AEB_STATE_STANDBY</a>;</div>
<div class="line"><span class="lineno">  457</span> </div>
<div class="line"><span class="lineno">  458</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="aeb__controller_8c.html#a15b2dc1261c867c309a53e7342596884">aeb_internal_state</a>.<a class="code hl_variable" href="structsensors__input__data.html#a8cc0d9e6c44c3b22ba0ad4e2e3f7d055">brake_pedal</a> == <span class="keyword">false</span> &amp;&amp; <a class="code hl_variable" href="aeb__controller_8c.html#a15b2dc1261c867c309a53e7342596884">aeb_internal_state</a>.<a class="code hl_variable" href="structsensors__input__data.html#a605d64229c3a536712761f44feb45251">accelerator_pedal</a> == <span class="keyword">false</span> &amp;&amp;</div>
<div class="line"><span class="lineno">  459</span>        <a class="code hl_variable" href="aeb__controller_8c.html#a15b2dc1261c867c309a53e7342596884">aeb_internal_state</a>.<a class="code hl_variable" href="structsensors__input__data.html#a446e6e46ec0541ab0b404d93a75ab6ac">relative_velocity</a> &gt;= <a class="code hl_define" href="constants_8h.html#a3f02e1e1a9f7e4eeba4cac6cfe6e18b1">MIN_SPD_ENABLED</a> &amp;&amp; <a class="code hl_variable" href="aeb__controller_8c.html#a15b2dc1261c867c309a53e7342596884">aeb_internal_state</a>.<a class="code hl_variable" href="structsensors__input__data.html#a446e6e46ec0541ab0b404d93a75ab6ac">relative_velocity</a> &lt;= <a class="code hl_define" href="constants_8h.html#ad6212b1ad0c34c6212ec01d5aa81005b">MAX_SPD_ENABLED</a>)</div>
<div class="line"><span class="lineno">  460</span>    {</div>
<div class="line"><span class="lineno">  461</span>        <span class="keywordflow">if</span> (ttc &lt; <a class="code hl_define" href="constants_8h.html#a54bb76eeda8e1910c30bab2500d91325">THRESHOLD_BRAKING</a>)</div>
<div class="line"><span class="lineno">  462</span>            <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="aeb__controller_8c.html#a60d56dbca0466eb23ba7c109132a5928a9f92c5be6a496ec11dcc37a5740b8bfa">AEB_STATE_BRAKE</a>;</div>
<div class="line"><span class="lineno">  463</span>        <span class="keywordflow">if</span> (ttc &lt; <a class="code hl_define" href="constants_8h.html#af914e188aab1d10dc995ba2938e0b691">THRESHOLD_ALARM</a>)</div>
<div class="line"><span class="lineno">  464</span>            <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="aeb__controller_8c.html#a60d56dbca0466eb23ba7c109132a5928a06edf6bb0f2816cbb0074c27d62e81d4">AEB_STATE_ALARM</a>;</div>
<div class="line"><span class="lineno">  465</span>    }</div>
<div class="line"><span class="lineno">  466</span> </div>
<div class="line"><span class="lineno">  467</span>    <span class="keywordflow">if</span> (ttc &lt; <a class="code hl_define" href="constants_8h.html#af914e188aab1d10dc995ba2938e0b691">THRESHOLD_ALARM</a>)</div>
<div class="line"><span class="lineno">  468</span>        my_new_state = <a class="code hl_enumvalue" href="aeb__controller_8c.html#a60d56dbca0466eb23ba7c109132a5928a06edf6bb0f2816cbb0074c27d62e81d4">AEB_STATE_ALARM</a>;</div>
<div class="line"><span class="lineno">  469</span> </div>
<div class="line"><span class="lineno">  470</span>    <span class="keywordflow">return</span> my_new_state;</div>
<div class="line"><span class="lineno">  471</span>}</div>
<div class="ttc" id="aaeb__controller_8c_html_a15b2dc1261c867c309a53e7342596884"><div class="ttname"><a href="aeb__controller_8c.html#a15b2dc1261c867c309a53e7342596884">aeb_internal_state</a></div><div class="ttdeci">sensors_input_data aeb_internal_state</div><div class="ttdef"><b>Definition</b> <a href="aeb__controller_8c_source.html#l00059">aeb_controller.c:59</a></div></div>
<div class="ttc" id="aconstants_8h_html_a3f02e1e1a9f7e4eeba4cac6cfe6e18b1"><div class="ttname"><a href="constants_8h.html#a3f02e1e1a9f7e4eeba4cac6cfe6e18b1">MIN_SPD_ENABLED</a></div><div class="ttdeci">#define MIN_SPD_ENABLED</div><div class="ttdoc">Minimum speed for which AEB is enabled in km/h [SwR-7] (SwR-7)</div><div class="ttdef"><b>Definition</b> <a href="constants_8h_source.html#l00039">constants.h:39</a></div></div>
<div class="ttc" id="aconstants_8h_html_a54bb76eeda8e1910c30bab2500d91325"><div class="ttname"><a href="constants_8h.html#a54bb76eeda8e1910c30bab2500d91325">THRESHOLD_BRAKING</a></div><div class="ttdeci">#define THRESHOLD_BRAKING</div><div class="ttdoc">Threshold for triggering the braking system (TTC &lt; 1.0 second). [SwR-3] (SwR-3)</div><div class="ttdef"><b>Definition</b> <a href="constants_8h_source.html#l00035">constants.h:35</a></div></div>
<div class="ttc" id="aconstants_8h_html_ad6212b1ad0c34c6212ec01d5aa81005b"><div class="ttname"><a href="constants_8h.html#ad6212b1ad0c34c6212ec01d5aa81005b">MAX_SPD_ENABLED</a></div><div class="ttdeci">#define MAX_SPD_ENABLED</div><div class="ttdoc">[Sys-F-9] &lt; Maximum speed for which AEB is enabled in km/h</div><div class="ttdef"><b>Definition</b> <a href="constants_8h_source.html#l00037">constants.h:37</a></div></div>
<div class="ttc" id="aconstants_8h_html_af914e188aab1d10dc995ba2938e0b691"><div class="ttname"><a href="constants_8h.html#af914e188aab1d10dc995ba2938e0b691">THRESHOLD_ALARM</a></div><div class="ttdeci">#define THRESHOLD_ALARM</div><div class="ttdoc">Threshold for triggering the alarm (TTC &lt; 2.0 seconds). [SwR-2] (SwR-2)</div><div class="ttdef"><b>Definition</b> <a href="constants_8h_source.html#l00033">constants.h:33</a></div></div>
<div class="ttc" id="astructsensors__input__data_html_a446e6e46ec0541ab0b404d93a75ab6ac"><div class="ttname"><a href="structsensors__input__data.html#a446e6e46ec0541ab0b404d93a75ab6ac">sensors_input_data::relative_velocity</a></div><div class="ttdeci">double relative_velocity</div><div class="ttdef"><b>Definition</b> <a href="sensors__input_8h_source.html#l00022">sensors_input.h:22</a></div></div>
<div class="ttc" id="astructsensors__input__data_html_a605d64229c3a536712761f44feb45251"><div class="ttname"><a href="structsensors__input__data.html#a605d64229c3a536712761f44feb45251">sensors_input_data::accelerator_pedal</a></div><div class="ttdeci">int accelerator_pedal</div><div class="ttdef"><b>Definition</b> <a href="sensors__input_8h_source.html#l00026">sensors_input.h:26</a></div></div>
<div class="ttc" id="astructsensors__input__data_html_a8cc0d9e6c44c3b22ba0ad4e2e3f7d055"><div class="ttname"><a href="structsensors__input__data.html#a8cc0d9e6c44c3b22ba0ad4e2e3f7d055">sensors_input_data::brake_pedal</a></div><div class="ttdeci">int brake_pedal</div><div class="ttdef"><b>Definition</b> <a href="sensors__input_8h_source.html#l00025">sensors_input.h:25</a></div></div>
<div class="ttc" id="astructsensors__input__data_html_ae89dc450cae9cb5131b7c1eee277b71e"><div class="ttname"><a href="structsensors__input__data.html#ae89dc450cae9cb5131b7c1eee277b71e">sensors_input_data::aeb_system_enabled</a></div><div class="ttdeci">int aeb_system_enabled</div><div class="ttdef"><b>Definition</b> <a href="sensors__input_8h_source.html#l00027">sensors_input.h:27</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae66f6b31b5ad750f1fe042a706a4e3d4" name="ae66f6b31b5ad750f1fe042a706a4e3d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae66f6b31b5ad750f1fe042a706a4e3d4">&#9670;&#160;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The main entry point of the AEB (Autonomous Emergency Braking) controller system. </p>
<p>This function initializes message queues for sensors and actuators, then starts the AEB controller thread to begin processing. It is designed for use in a production environment where the AEB controller operates continuously.</p>
<dl class="section return"><dt>Returns</dt><dd>0 on successful execution. If an error occurs while creating the AEB controller thread, the function will terminate with an error code.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>This function is only included in production builds, as it is enclosed in a preprocessor check (<code>#ifndef TEST_MODE_CONTROLLER</code>). </dd></dl>

<p class="definition">Definition at line <a class="el" href="aeb__controller_8c_source.html#l00096">96</a> of file <a class="el" href="aeb__controller_8c_source.html">aeb_controller.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   97</span>{</div>
<div class="line"><span class="lineno">   98</span>    <span class="comment">// Open message queues for communication with sensors and actuators</span></div>
<div class="line"><span class="lineno">   99</span>    <a class="code hl_variable" href="aeb__controller_8c.html#a074b0ef9bc31934bbf9b2b54e9e9aa43">sensors_mq</a> = <a class="code hl_function" href="mq__utils_8c.html#a887671fb12fe2639b7be4a301927e497">open_mq</a>(<a class="code hl_define" href="constants_8h.html#aab9d8e700a34c08a7d8bca1d5a2d31a5">SENSORS_MQ</a>);</div>
<div class="line"><span class="lineno">  100</span>    <a class="code hl_variable" href="aeb__controller_8c.html#a888ff70e2de4c8fbaedc5134dbe2a441">actuators_mq</a> = <a class="code hl_function" href="mq__utils_8c.html#a887671fb12fe2639b7be4a301927e497">open_mq</a>(<a class="code hl_define" href="constants_8h.html#ab70848171cb403eb07c6f9e1fecdccd7">ACTUATORS_MQ</a>);</div>
<div class="line"><span class="lineno">  101</span> </div>
<div class="line"><span class="lineno">  102</span>    <span class="comment">// Create the AEB controller thread</span></div>
<div class="line"><span class="lineno">  103</span>    <span class="keywordtype">int</span> controller_thread = pthread_create(&amp;<a class="code hl_variable" href="aeb__controller_8c.html#a31be80dc3d658ca7ba3be24962aed6d4">aeb_controller_id</a>, NULL, <a class="code hl_function" href="aeb__controller_8c.html#a75689aa11501c348bd09370b739bf2e5">mainWorkingLoop</a>, NULL);</div>
<div class="line"><span class="lineno">  104</span>    <span class="keywordflow">if</span> (controller_thread != 0)</div>
<div class="line"><span class="lineno">  105</span>    {</div>
<div class="line"><span class="lineno">  106</span>        <span class="comment">// If thread creation fails, print error and exit</span></div>
<div class="line"><span class="lineno">  107</span>        perror(<span class="stringliteral">&quot;AEB Controller: It wasn&#39;t possible to create the associated thread\n&quot;</span>);</div>
<div class="line"><span class="lineno">  108</span>        exit(53);</div>
<div class="line"><span class="lineno">  109</span>    }</div>
<div class="line"><span class="lineno">  110</span> </div>
<div class="line"><span class="lineno">  111</span>    <span class="comment">// Wait for the controller thread to finish</span></div>
<div class="line"><span class="lineno">  112</span>    controller_thread = pthread_join(<a class="code hl_variable" href="aeb__controller_8c.html#a31be80dc3d658ca7ba3be24962aed6d4">aeb_controller_id</a>, NULL);</div>
<div class="line"><span class="lineno">  113</span> </div>
<div class="line"><span class="lineno">  114</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  115</span>}</div>
<div class="ttc" id="aaeb__controller_8c_html_a074b0ef9bc31934bbf9b2b54e9e9aa43"><div class="ttname"><a href="aeb__controller_8c.html#a074b0ef9bc31934bbf9b2b54e9e9aa43">sensors_mq</a></div><div class="ttdeci">mqd_t sensors_mq</div><div class="ttdef"><b>Definition</b> <a href="aeb__controller_8c_source.html#l00056">aeb_controller.c:56</a></div></div>
<div class="ttc" id="aaeb__controller_8c_html_a31be80dc3d658ca7ba3be24962aed6d4"><div class="ttname"><a href="aeb__controller_8c.html#a31be80dc3d658ca7ba3be24962aed6d4">aeb_controller_id</a></div><div class="ttdeci">pthread_t aeb_controller_id</div><div class="ttdef"><b>Definition</b> <a href="aeb__controller_8c_source.html#l00057">aeb_controller.c:57</a></div></div>
<div class="ttc" id="aaeb__controller_8c_html_a75689aa11501c348bd09370b739bf2e5"><div class="ttname"><a href="aeb__controller_8c.html#a75689aa11501c348bd09370b739bf2e5">mainWorkingLoop</a></div><div class="ttdeci">void * mainWorkingLoop(void *arg)</div><div class="ttdoc">Main loop for the AEB controller that processes sensor data and makes decisions.</div><div class="ttdef"><b>Definition</b> <a href="aeb__controller_8c_source.html#l00128">aeb_controller.c:128</a></div></div>
<div class="ttc" id="aaeb__controller_8c_html_a888ff70e2de4c8fbaedc5134dbe2a441"><div class="ttname"><a href="aeb__controller_8c.html#a888ff70e2de4c8fbaedc5134dbe2a441">actuators_mq</a></div><div class="ttdeci">mqd_t actuators_mq</div><div class="ttdef"><b>Definition</b> <a href="aeb__controller_8c_source.html#l00056">aeb_controller.c:56</a></div></div>
<div class="ttc" id="aconstants_8h_html_aab9d8e700a34c08a7d8bca1d5a2d31a5"><div class="ttname"><a href="constants_8h.html#aab9d8e700a34c08a7d8bca1d5a2d31a5">SENSORS_MQ</a></div><div class="ttdeci">#define SENSORS_MQ</div><div class="ttdef"><b>Definition</b> <a href="constants_8h_source.html#l00021">constants.h:21</a></div></div>
<div class="ttc" id="aconstants_8h_html_ab70848171cb403eb07c6f9e1fecdccd7"><div class="ttname"><a href="constants_8h.html#ab70848171cb403eb07c6f9e1fecdccd7">ACTUATORS_MQ</a></div><div class="ttdeci">#define ACTUATORS_MQ</div><div class="ttdef"><b>Definition</b> <a href="constants_8h_source.html#l00022">constants.h:22</a></div></div>
<div class="ttc" id="amq__utils_8c_html_a887671fb12fe2639b7be4a301927e497"><div class="ttname"><a href="mq__utils_8c.html#a887671fb12fe2639b7be4a301927e497">open_mq</a></div><div class="ttdeci">mqd_t open_mq(char *mq_name)</div><div class="ttdoc">Opens a POSIX message queue.</div><div class="ttdef"><b>Definition</b> <a href="mq__utils_8c_source.html#l00062">mq_utils.c:62</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a75689aa11501c348bd09370b739bf2e5" name="a75689aa11501c348bd09370b739bf2e5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a75689aa11501c348bd09370b739bf2e5">&#9670;&#160;</a></span>mainWorkingLoop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void * mainWorkingLoop </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Main loop for the AEB controller that processes sensor data and makes decisions. </p>
<p>This function continuously checks the message queue for new sensor data, processes it, and sends commands to the actuators based on the calculated AEB state.</p>
<p>Requirements [SwR-5] (<a class="el" href="software_requirements.html#SwR-5">SwR-5</a>), [SwR-6] (<a class="el" href="software_requirements.html#SwR-6">SwR-6</a>) and [SwR-9] (<a class="el" href="software_requirements.html#SwR-9">SwR-9</a>)</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">arg</td><td>Arguments passed to the thread (not used here). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>NULL. </dd></dl>

<p class="definition">Definition at line <a class="el" href="aeb__controller_8c_source.html#l00128">128</a> of file <a class="el" href="aeb__controller_8c_source.html">aeb_controller.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  129</span>{</div>
<div class="line"><span class="lineno">  130</span>    <a class="code hl_enumeration" href="aeb__controller_8c.html#a60d56dbca0466eb23ba7c109132a5928">aeb_controller_state</a> state = <a class="code hl_enumvalue" href="aeb__controller_8c.html#a60d56dbca0466eb23ba7c109132a5928a6d038f8cafa588e741d3b930b758b775">AEB_STATE_STANDBY</a>;</div>
<div class="line"><span class="lineno">  131</span> </div>
<div class="line"><span class="lineno">  132</span>    <span class="keywordtype">int</span> empty_mq_counter = 0;</div>
<div class="line"><span class="lineno">  133</span>    <span class="keywordflow">while</span> (empty_mq_counter &lt; <a class="code hl_define" href="aeb__controller_8c.html#ab0b4f8f98c3eb2f7041948c148ceadf8">LOOP_EMPTY_ITERATIONS_MAX</a>)</div>
<div class="line"><span class="lineno">  134</span>    {</div>
<div class="line"><span class="lineno">  135</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="mq__utils_8c.html#abee084f2648925ba92404d2d06f98581">read_mq</a>(<a class="code hl_variable" href="aeb__controller_8c.html#a074b0ef9bc31934bbf9b2b54e9e9aa43">sensors_mq</a>, &amp;<a class="code hl_variable" href="aeb__controller_8c.html#a5d2051893d3d3ea4e0dcc3c647770c95">captured_can_frame</a>) != -1) <span class="comment">// Reads message from sensors [SwR-9]</span></div>
<div class="line"><span class="lineno">  136</span>        {</div>
<div class="line"><span class="lineno">  137</span>            empty_mq_counter = 0; <span class="comment">// Reset counter if data is received</span></div>
<div class="line"><span class="lineno">  138</span> </div>
<div class="line"><span class="lineno">  139</span>            <a class="code hl_function" href="aeb__controller_8c.html#aa981d9343b3eb6ab97a07e44dc0e9db5">translateAndCallCanMsg</a>(<a class="code hl_variable" href="aeb__controller_8c.html#a5d2051893d3d3ea4e0dcc3c647770c95">captured_can_frame</a>); <span class="comment">// Process the received CAN message</span></div>
<div class="line"><span class="lineno">  140</span> </div>
<div class="line"><span class="lineno">  141</span>            <span class="keywordtype">double</span> ttc = <a class="code hl_function" href="ttc__control_8c.html#a1f46561688e874bc9354c6bceea9fed2">ttc_calc</a>(<a class="code hl_variable" href="aeb__controller_8c.html#a15b2dc1261c867c309a53e7342596884">aeb_internal_state</a>.<a class="code hl_variable" href="structsensors__input__data.html#a01371737abb4472988490f1d011be0c9">obstacle_distance</a>, <a class="code hl_variable" href="aeb__controller_8c.html#a15b2dc1261c867c309a53e7342596884">aeb_internal_state</a>.<a class="code hl_variable" href="structsensors__input__data.html#a446e6e46ec0541ab0b404d93a75ab6ac">relative_velocity</a>,</div>
<div class="line"><span class="lineno">  142</span>                                  <a class="code hl_variable" href="aeb__controller_8c.html#a15b2dc1261c867c309a53e7342596884">aeb_internal_state</a>.<a class="code hl_variable" href="structsensors__input__data.html#a6d9d7c897f6485d71742ef8166991c22">relative_acceleration</a>);</div>
<div class="line"><span class="lineno">  143</span> </div>
<div class="line"><span class="lineno">  144</span>            state = <a class="code hl_function" href="aeb__controller_8c.html#a56109d8ed6dda45e79e36b2bc4c42360">getAEBState</a>(<a class="code hl_variable" href="aeb__controller_8c.html#a15b2dc1261c867c309a53e7342596884">aeb_internal_state</a>, ttc);</div>
<div class="line"><span class="lineno">  145</span> </div>
<div class="line"><span class="lineno">  146</span>            <a class="code hl_variable" href="aeb__controller_8c.html#a4847c169e96fc59553ca7c852cc004d6">out_can_frame</a> = <a class="code hl_function" href="aeb__controller_8c.html#a46c3844253eb536d7b9f4a47d0b0e828">updateCanMsgOutput</a>(state);</div>
<div class="line"><span class="lineno">  147</span> </div>
<div class="line"><span class="lineno">  148</span>            <span class="keywordflow">if</span> (state == <a class="code hl_enumvalue" href="aeb__controller_8c.html#a60d56dbca0466eb23ba7c109132a5928a6d038f8cafa588e741d3b930b758b775">AEB_STATE_STANDBY</a>)         <span class="comment">// [SwR-5]</span></div>
<div class="line"><span class="lineno">  149</span>                <a class="code hl_function" href="mq__utils_8c.html#a57d5de8d149ae20eb2026dac0cef7d08">write_mq</a>(<a class="code hl_variable" href="aeb__controller_8c.html#a888ff70e2de4c8fbaedc5134dbe2a441">actuators_mq</a>, &amp;<a class="code hl_variable" href="aeb__controller_8c.html#ae6763c5f7a5772f4680437dee47e8954">empty_msg</a>); <span class="comment">// Send empty message when in standby state</span></div>
<div class="line"><span class="lineno">  150</span>            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  151</span>                <a class="code hl_function" href="mq__utils_8c.html#a57d5de8d149ae20eb2026dac0cef7d08">write_mq</a>(<a class="code hl_variable" href="aeb__controller_8c.html#a888ff70e2de4c8fbaedc5134dbe2a441">actuators_mq</a>, &amp;<a class="code hl_variable" href="aeb__controller_8c.html#a4847c169e96fc59553ca7c852cc004d6">out_can_frame</a>); <span class="comment">// Send the appropriate message based on the current state</span></div>
<div class="line"><span class="lineno">  152</span>        }</div>
<div class="line"><span class="lineno">  153</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  154</span>            empty_mq_counter++; <span class="comment">// Increment counter if no message is received</span></div>
<div class="line"><span class="lineno">  155</span> </div>
<div class="line"><span class="lineno">  156</span>        usleep(200000); <span class="comment">// Wait for a short period before the next iteration (to be replaced later)</span></div>
<div class="line"><span class="lineno">  157</span>    }</div>
<div class="line"><span class="lineno">  158</span> </div>
<div class="line"><span class="lineno">  159</span>    printf(<span class="stringliteral">&quot;AEB Controller: empty_mq_counter reached the limit, exiting\n&quot;</span>);</div>
<div class="line"><span class="lineno">  160</span>    <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno">  161</span>}</div>
<div class="ttc" id="aaeb__controller_8c_html_a46c3844253eb536d7b9f4a47d0b0e828"><div class="ttname"><a href="aeb__controller_8c.html#a46c3844253eb536d7b9f4a47d0b0e828">updateCanMsgOutput</a></div><div class="ttdeci">can_msg updateCanMsgOutput(aeb_controller_state state)</div><div class="ttdoc">Generates the appropriate CAN message for the AEB system state.</div><div class="ttdef"><b>Definition</b> <a href="aeb__controller_8c_source.html#l00410">aeb_controller.c:410</a></div></div>
<div class="ttc" id="aaeb__controller_8c_html_a4847c169e96fc59553ca7c852cc004d6"><div class="ttname"><a href="aeb__controller_8c.html#a4847c169e96fc59553ca7c852cc004d6">out_can_frame</a></div><div class="ttdeci">can_msg out_can_frame</div><div class="ttdef"><b>Definition</b> <a href="aeb__controller_8c_source.html#l00073">aeb_controller.c:73</a></div></div>
<div class="ttc" id="aaeb__controller_8c_html_a56109d8ed6dda45e79e36b2bc4c42360"><div class="ttname"><a href="aeb__controller_8c.html#a56109d8ed6dda45e79e36b2bc4c42360">getAEBState</a></div><div class="ttdeci">aeb_controller_state getAEBState(sensors_input_data aeb_internal_state, double ttc)</div><div class="ttdoc">Determines the current state of the AEB system based on sensor input and TTC.</div><div class="ttdef"><b>Definition</b> <a href="aeb__controller_8c_source.html#l00451">aeb_controller.c:451</a></div></div>
<div class="ttc" id="aaeb__controller_8c_html_a5d2051893d3d3ea4e0dcc3c647770c95"><div class="ttname"><a href="aeb__controller_8c.html#a5d2051893d3d3ea4e0dcc3c647770c95">captured_can_frame</a></div><div class="ttdeci">can_msg captured_can_frame</div><div class="ttdef"><b>Definition</b> <a href="aeb__controller_8c_source.html#l00069">aeb_controller.c:69</a></div></div>
<div class="ttc" id="aaeb__controller_8c_html_aa981d9343b3eb6ab97a07e44dc0e9db5"><div class="ttname"><a href="aeb__controller_8c.html#aa981d9343b3eb6ab97a07e44dc0e9db5">translateAndCallCanMsg</a></div><div class="ttdeci">void translateAndCallCanMsg(can_msg captured_frame)</div><div class="ttdoc">Translates the received CAN message and calls the appropriate handler function based on the message i...</div><div class="ttdef"><b>Definition</b> <a href="aeb__controller_8c_source.html#l00190">aeb_controller.c:190</a></div></div>
<div class="ttc" id="aaeb__controller_8c_html_ab0b4f8f98c3eb2f7041948c148ceadf8"><div class="ttname"><a href="aeb__controller_8c.html#ab0b4f8f98c3eb2f7041948c148ceadf8">LOOP_EMPTY_ITERATIONS_MAX</a></div><div class="ttdeci">#define LOOP_EMPTY_ITERATIONS_MAX</div><div class="ttdef"><b>Definition</b> <a href="aeb__controller_8c_source.html#l00029">aeb_controller.c:29</a></div></div>
<div class="ttc" id="aaeb__controller_8c_html_ae6763c5f7a5772f4680437dee47e8954"><div class="ttname"><a href="aeb__controller_8c.html#ae6763c5f7a5772f4680437dee47e8954">empty_msg</a></div><div class="ttdeci">can_msg empty_msg</div><div class="ttdoc">[SwR-5] (SwR-5)</div><div class="ttdef"><b>Definition</b> <a href="aeb__controller_8c_source.html#l00078">aeb_controller.c:78</a></div></div>
<div class="ttc" id="amq__utils_8c_html_a57d5de8d149ae20eb2026dac0cef7d08"><div class="ttname"><a href="mq__utils_8c.html#a57d5de8d149ae20eb2026dac0cef7d08">write_mq</a></div><div class="ttdeci">int write_mq(mqd_t mq_sender, can_msg *msg)</div><div class="ttdoc">Writes a message from a POSIX message queue.</div><div class="ttdef"><b>Definition</b> <a href="mq__utils_8c_source.html#l00125">mq_utils.c:125</a></div></div>
<div class="ttc" id="amq__utils_8c_html_abee084f2648925ba92404d2d06f98581"><div class="ttname"><a href="mq__utils_8c.html#abee084f2648925ba92404d2d06f98581">read_mq</a></div><div class="ttdeci">int read_mq(mqd_t mq_receiver, can_msg *msg_read)</div><div class="ttdoc">Reads a message from a POSIX message queue.</div><div class="ttdef"><b>Definition</b> <a href="mq__utils_8c_source.html#l00105">mq_utils.c:105</a></div></div>
<div class="ttc" id="astructsensors__input__data_html_a01371737abb4472988490f1d011be0c9"><div class="ttname"><a href="structsensors__input__data.html#a01371737abb4472988490f1d011be0c9">sensors_input_data::obstacle_distance</a></div><div class="ttdeci">double obstacle_distance</div><div class="ttdef"><b>Definition</b> <a href="sensors__input_8h_source.html#l00024">sensors_input.h:24</a></div></div>
<div class="ttc" id="astructsensors__input__data_html_a6d9d7c897f6485d71742ef8166991c22"><div class="ttname"><a href="structsensors__input__data.html#a6d9d7c897f6485d71742ef8166991c22">sensors_input_data::relative_acceleration</a></div><div class="ttdeci">double relative_acceleration</div><div class="ttdef"><b>Definition</b> <a href="sensors__input_8h_source.html#l00029">sensors_input.h:29</a></div></div>
<div class="ttc" id="attc__control_8c_html_a1f46561688e874bc9354c6bceea9fed2"><div class="ttname"><a href="ttc__control_8c.html#a1f46561688e874bc9354c6bceea9fed2">ttc_calc</a></div><div class="ttdeci">double ttc_calc(double dis_rel, double spd_rel, double rel_acel)</div><div class="ttdoc">Calculate the time to collision (TTC) based on relative distance and speed.</div><div class="ttdef"><b>Definition</b> <a href="ttc__control_8c_source.html#l00039">ttc_control.c:39</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1243268c621c2049a41956ccfc934fd5" name="a1243268c621c2049a41956ccfc934fd5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1243268c621c2049a41956ccfc934fd5">&#9670;&#160;</a></span>print_info()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void print_info </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Prints debug information about the AEB system's internal state. </p>
<p>This function displays the current values of key variables such as relative velocity, obstacle distance, pedal states, and more. </p>

<p class="definition">Definition at line <a class="el" href="aeb__controller_8c_source.html#l00169">169</a> of file <a class="el" href="aeb__controller_8c_source.html">aeb_controller.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  170</span>{</div>
<div class="line"><span class="lineno">  171</span>    printf(<span class="stringliteral">&quot;relative_velocity: %lf\n&quot;</span>, <a class="code hl_variable" href="aeb__controller_8c.html#a15b2dc1261c867c309a53e7342596884">aeb_internal_state</a>.<a class="code hl_variable" href="structsensors__input__data.html#a446e6e46ec0541ab0b404d93a75ab6ac">relative_velocity</a>);</div>
<div class="line"><span class="lineno">  172</span>    printf(<span class="stringliteral">&quot;has_obstacle: %s\n&quot;</span>, <a class="code hl_variable" href="aeb__controller_8c.html#a15b2dc1261c867c309a53e7342596884">aeb_internal_state</a>.<a class="code hl_variable" href="structsensors__input__data.html#a3782de9b1037f3ce0036f685de31f165">has_obstacle</a> ? <span class="stringliteral">&quot;true&quot;</span> : <span class="stringliteral">&quot;false&quot;</span>);</div>
<div class="line"><span class="lineno">  173</span>    printf(<span class="stringliteral">&quot;obstacle_distance: %lf\n&quot;</span>, <a class="code hl_variable" href="aeb__controller_8c.html#a15b2dc1261c867c309a53e7342596884">aeb_internal_state</a>.<a class="code hl_variable" href="structsensors__input__data.html#a01371737abb4472988490f1d011be0c9">obstacle_distance</a>);</div>
<div class="line"><span class="lineno">  174</span>    printf(<span class="stringliteral">&quot;brake_pedal: %s\n&quot;</span>, <a class="code hl_variable" href="aeb__controller_8c.html#a15b2dc1261c867c309a53e7342596884">aeb_internal_state</a>.<a class="code hl_variable" href="structsensors__input__data.html#a8cc0d9e6c44c3b22ba0ad4e2e3f7d055">brake_pedal</a> ? <span class="stringliteral">&quot;true&quot;</span> : <span class="stringliteral">&quot;false&quot;</span>);</div>
<div class="line"><span class="lineno">  175</span>    printf(<span class="stringliteral">&quot;accelerator_pedal: %s\n&quot;</span>, <a class="code hl_variable" href="aeb__controller_8c.html#a15b2dc1261c867c309a53e7342596884">aeb_internal_state</a>.<a class="code hl_variable" href="structsensors__input__data.html#a605d64229c3a536712761f44feb45251">accelerator_pedal</a> ? <span class="stringliteral">&quot;true&quot;</span> : <span class="stringliteral">&quot;false&quot;</span>);</div>
<div class="line"><span class="lineno">  176</span>    printf(<span class="stringliteral">&quot;aeb_system_enabled: %s\n&quot;</span>, <a class="code hl_variable" href="aeb__controller_8c.html#a15b2dc1261c867c309a53e7342596884">aeb_internal_state</a>.<a class="code hl_variable" href="structsensors__input__data.html#ae89dc450cae9cb5131b7c1eee277b71e">aeb_system_enabled</a> ? <span class="stringliteral">&quot;true&quot;</span> : <span class="stringliteral">&quot;false&quot;</span>);</div>
<div class="line"><span class="lineno">  177</span>    printf(<span class="stringliteral">&quot;Is vehicle in reverse: %s\n&quot;</span>, <a class="code hl_variable" href="aeb__controller_8c.html#a15b2dc1261c867c309a53e7342596884">aeb_internal_state</a>.<a class="code hl_variable" href="structsensors__input__data.html#a9ec0cda0acd16fae666aca69cb7938ac">reverse_enabled</a> ? <span class="stringliteral">&quot;true&quot;</span> : <span class="stringliteral">&quot;false&quot;</span>);</div>
<div class="line"><span class="lineno">  178</span>}</div>
<div class="ttc" id="astructsensors__input__data_html_a3782de9b1037f3ce0036f685de31f165"><div class="ttname"><a href="structsensors__input__data.html#a3782de9b1037f3ce0036f685de31f165">sensors_input_data::has_obstacle</a></div><div class="ttdeci">int has_obstacle</div><div class="ttdef"><b>Definition</b> <a href="sensors__input_8h_source.html#l00023">sensors_input.h:23</a></div></div>
<div class="ttc" id="astructsensors__input__data_html_a9ec0cda0acd16fae666aca69cb7938ac"><div class="ttname"><a href="structsensors__input__data.html#a9ec0cda0acd16fae666aca69cb7938ac">sensors_input_data::reverse_enabled</a></div><div class="ttdeci">int reverse_enabled</div><div class="ttdef"><b>Definition</b> <a href="sensors__input_8h_source.html#l00028">sensors_input.h:28</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa981d9343b3eb6ab97a07e44dc0e9db5" name="aa981d9343b3eb6ab97a07e44dc0e9db5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa981d9343b3eb6ab97a07e44dc0e9db5">&#9670;&#160;</a></span>translateAndCallCanMsg()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void translateAndCallCanMsg </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcan__msg.html">can_msg</a>&#160;</td>
          <td class="paramname"><em>captured_frame</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Translates the received CAN message and calls the appropriate handler function based on the message identifier. </p>
<p>This function checks the message identifier and calls the appropriate function to handle the CAN message data.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">captured_frame</td><td>The received CAN message to be processed. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="aeb__controller_8c_source.html#l00190">190</a> of file <a class="el" href="aeb__controller_8c_source.html">aeb_controller.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  191</span>{</div>
<div class="line"><span class="lineno">  192</span>    <span class="keywordflow">switch</span> (captured_frame.<a class="code hl_variable" href="structcan__msg.html#ac4e36d6ad06dd50743b62e7414f78184">identifier</a>)</div>
<div class="line"><span class="lineno">  193</span>    {</div>
<div class="line"><span class="lineno">  194</span>    <span class="keywordflow">case</span> <a class="code hl_define" href="dbc_8h.html#aba7d5a0a42bbc6b35c9e5ff899fcbb9f">ID_PEDALS</a>:</div>
<div class="line"><span class="lineno">  195</span>        <a class="code hl_function" href="aeb__controller_8c.html#a6ba2245e7d2117f6190d0687e1d9beb0">updateInternalPedalsState</a>(captured_frame);</div>
<div class="line"><span class="lineno">  196</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  197</span>    <span class="keywordflow">case</span> <a class="code hl_define" href="dbc_8h.html#ae3477def1e243ca2530c658431decd62">ID_SPEED_S</a>:</div>
<div class="line"><span class="lineno">  198</span>        <a class="code hl_function" href="aeb__controller_8c.html#ac1567ee14cae1132278047c889744010">updateInternalSpeedState</a>(captured_frame);</div>
<div class="line"><span class="lineno">  199</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  200</span>    <span class="keywordflow">case</span> <a class="code hl_define" href="dbc_8h.html#a1622c4f92373810c870331dfba0ac7c2">ID_OBSTACLE_S</a>:</div>
<div class="line"><span class="lineno">  201</span>        <a class="code hl_function" href="aeb__controller_8c.html#a6abe9c41325ac131ce28c7922cc509bf">updateInternalObstacleState</a>(captured_frame);</div>
<div class="line"><span class="lineno">  202</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  203</span>    <span class="keywordflow">case</span> <a class="code hl_define" href="dbc_8h.html#aed7b961aae1393ad39496b0d847580d7">ID_CAR_C</a>:</div>
<div class="line"><span class="lineno">  204</span>        <a class="code hl_function" href="aeb__controller_8c.html#a0385dbe57c403b31fa857cced3197a0e">updateInternalCarCState</a>(captured_frame);</div>
<div class="line"><span class="lineno">  205</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  206</span>    <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno">  207</span>        printf(<span class="stringliteral">&quot;CAN Identifier unknown\n&quot;</span>);</div>
<div class="line"><span class="lineno">  208</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  209</span>    }</div>
<div class="line"><span class="lineno">  210</span>}</div>
<div class="ttc" id="aaeb__controller_8c_html_a0385dbe57c403b31fa857cced3197a0e"><div class="ttname"><a href="aeb__controller_8c.html#a0385dbe57c403b31fa857cced3197a0e">updateInternalCarCState</a></div><div class="ttdeci">void updateInternalCarCState(can_msg captured_frame)</div><div class="ttdoc">Updates the internal car state based on the received CAN message.</div><div class="ttdef"><b>Definition</b> <a href="aeb__controller_8c_source.html#l00387">aeb_controller.c:387</a></div></div>
<div class="ttc" id="aaeb__controller_8c_html_a6abe9c41325ac131ce28c7922cc509bf"><div class="ttname"><a href="aeb__controller_8c.html#a6abe9c41325ac131ce28c7922cc509bf">updateInternalObstacleState</a></div><div class="ttdeci">void updateInternalObstacleState(can_msg captured_frame)</div><div class="ttdoc">Updates the internal obstacle state based on the received CAN message.</div><div class="ttdef"><b>Definition</b> <a href="aeb__controller_8c_source.html#l00337">aeb_controller.c:337</a></div></div>
<div class="ttc" id="aaeb__controller_8c_html_a6ba2245e7d2117f6190d0687e1d9beb0"><div class="ttname"><a href="aeb__controller_8c.html#a6ba2245e7d2117f6190d0687e1d9beb0">updateInternalPedalsState</a></div><div class="ttdeci">void updateInternalPedalsState(can_msg captured_frame)</div><div class="ttdoc">Updates the internal state for the brake and accelerator pedals from the received CAN message.</div><div class="ttdef"><b>Definition</b> <a href="aeb__controller_8c_source.html#l00219">aeb_controller.c:219</a></div></div>
<div class="ttc" id="aaeb__controller_8c_html_ac1567ee14cae1132278047c889744010"><div class="ttname"><a href="aeb__controller_8c.html#ac1567ee14cae1132278047c889744010">updateInternalSpeedState</a></div><div class="ttdeci">void updateInternalSpeedState(can_msg captured_frame)</div><div class="ttdoc">Updates the internal speed state based on the received CAN message.</div><div class="ttdef"><b>Definition</b> <a href="aeb__controller_8c_source.html#l00248">aeb_controller.c:248</a></div></div>
<div class="ttc" id="adbc_8h_html_a1622c4f92373810c870331dfba0ac7c2"><div class="ttname"><a href="dbc_8h.html#a1622c4f92373810c870331dfba0ac7c2">ID_OBSTACLE_S</a></div><div class="ttdeci">#define ID_OBSTACLE_S</div><div class="ttdef"><b>Definition</b> <a href="dbc_8h_source.html#l00024">dbc.h:24</a></div></div>
<div class="ttc" id="adbc_8h_html_aba7d5a0a42bbc6b35c9e5ff899fcbb9f"><div class="ttname"><a href="dbc_8h.html#aba7d5a0a42bbc6b35c9e5ff899fcbb9f">ID_PEDALS</a></div><div class="ttdeci">#define ID_PEDALS</div><div class="ttdef"><b>Definition</b> <a href="dbc_8h_source.html#l00022">dbc.h:22</a></div></div>
<div class="ttc" id="adbc_8h_html_ae3477def1e243ca2530c658431decd62"><div class="ttname"><a href="dbc_8h.html#ae3477def1e243ca2530c658431decd62">ID_SPEED_S</a></div><div class="ttdeci">#define ID_SPEED_S</div><div class="ttdef"><b>Definition</b> <a href="dbc_8h_source.html#l00023">dbc.h:23</a></div></div>
<div class="ttc" id="adbc_8h_html_aed7b961aae1393ad39496b0d847580d7"><div class="ttname"><a href="dbc_8h.html#aed7b961aae1393ad39496b0d847580d7">ID_CAR_C</a></div><div class="ttdeci">#define ID_CAR_C</div><div class="ttdef"><b>Definition</b> <a href="dbc_8h_source.html#l00025">dbc.h:25</a></div></div>
<div class="ttc" id="astructcan__msg_html_ac4e36d6ad06dd50743b62e7414f78184"><div class="ttname"><a href="structcan__msg.html#ac4e36d6ad06dd50743b62e7414f78184">can_msg::identifier</a></div><div class="ttdeci">uint32_t identifier</div><div class="ttdef"><b>Definition</b> <a href="dbc_8h_source.html#l00048">dbc.h:48</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a46c3844253eb536d7b9f4a47d0b0e828" name="a46c3844253eb536d7b9f4a47d0b0e828"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a46c3844253eb536d7b9f4a47d0b0e828">&#9670;&#160;</a></span>updateCanMsgOutput()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structcan__msg.html">can_msg</a> updateCanMsgOutput </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="aeb__controller_8c.html#a60d56dbca0466eb23ba7c109132a5928">aeb_controller_state</a>&#160;</td>
          <td class="paramname"><em>state</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Generates the appropriate CAN message for the AEB system state. </p>
<p>This function creates a CAN message to be sent to the actuators based on the current state of the AEB system (e.g., brake, alarm, etc.).</p>
<p>Requirements [SwR-2] (<a class="el" href="software_requirements.html#SwR-2">SwR-2</a>), [SwR-14] (<a class="el" href="software_requirements.html#SwR-14">SwR-14</a>) and [SwR-15] (<a class="el" href="software_requirements.html#SwR-15">SwR-15</a>)</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">state</td><td>The current state of the AEB system. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The generated CAN message. </dd></dl>

<p class="definition">Definition at line <a class="el" href="aeb__controller_8c_source.html#l00410">410</a> of file <a class="el" href="aeb__controller_8c_source.html">aeb_controller.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  411</span>{</div>
<div class="line"><span class="lineno">  412</span>    <a class="code hl_struct" href="structcan__msg.html">can_msg</a> aux = {.<a class="code hl_variable" href="structcan__msg.html#ac4e36d6ad06dd50743b62e7414f78184">identifier</a> = <a class="code hl_define" href="dbc_8h.html#a371988701ce573f2df413957182b8826">ID_AEB_S</a>, .dataFrame = <a class="code hl_define" href="dbc_8h.html#af30056253fdd3a5987a1cab7062f7847">BASE_DATA_FRAME</a>};</div>
<div class="line"><span class="lineno">  413</span> </div>
<div class="line"><span class="lineno">  414</span>    <span class="keywordflow">switch</span> (state)</div>
<div class="line"><span class="lineno">  415</span>    {</div>
<div class="line"><span class="lineno">  416</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="aeb__controller_8c.html#a60d56dbca0466eb23ba7c109132a5928a9f92c5be6a496ec11dcc37a5740b8bfa">AEB_STATE_BRAKE</a>:</div>
<div class="line"><span class="lineno">  417</span>        aux.<a class="code hl_variable" href="structcan__msg.html#ae7f3f34abc69d7ee28fcd77a53091d54">dataFrame</a>[0] = 0x01; <span class="comment">// activate warning system</span></div>
<div class="line"><span class="lineno">  418</span>        aux.<a class="code hl_variable" href="structcan__msg.html#ae7f3f34abc69d7ee28fcd77a53091d54">dataFrame</a>[1] = 0x01; <span class="comment">// activate braking system</span></div>
<div class="line"><span class="lineno">  419</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  420</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="aeb__controller_8c.html#a60d56dbca0466eb23ba7c109132a5928a06edf6bb0f2816cbb0074c27d62e81d4">AEB_STATE_ALARM</a>:</div>
<div class="line"><span class="lineno">  421</span>        aux.<a class="code hl_variable" href="structcan__msg.html#ae7f3f34abc69d7ee28fcd77a53091d54">dataFrame</a>[0] = 0x01; <span class="comment">// activate warning system</span></div>
<div class="line"><span class="lineno">  422</span>        aux.<a class="code hl_variable" href="structcan__msg.html#ae7f3f34abc69d7ee28fcd77a53091d54">dataFrame</a>[1] = 0x00; <span class="comment">// don&#39;t activate braking system</span></div>
<div class="line"><span class="lineno">  423</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  424</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="aeb__controller_8c.html#a60d56dbca0466eb23ba7c109132a5928ae454b2a27eae83a0c57bd2ffde66e09a">AEB_STATE_ACTIVE</a>:</div>
<div class="line"><span class="lineno">  425</span>        aux.<a class="code hl_variable" href="structcan__msg.html#ae7f3f34abc69d7ee28fcd77a53091d54">dataFrame</a>[0] = 0x00; <span class="comment">// don&#39;t activate warning system</span></div>
<div class="line"><span class="lineno">  426</span>        aux.<a class="code hl_variable" href="structcan__msg.html#ae7f3f34abc69d7ee28fcd77a53091d54">dataFrame</a>[1] = 0x00; <span class="comment">// don&#39;t activate braking system</span></div>
<div class="line"><span class="lineno">  427</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  428</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="aeb__controller_8c.html#a60d56dbca0466eb23ba7c109132a5928a6d038f8cafa588e741d3b930b758b775">AEB_STATE_STANDBY</a>:</div>
<div class="line"><span class="lineno">  429</span>        aux.<a class="code hl_variable" href="structcan__msg.html#ae7f3f34abc69d7ee28fcd77a53091d54">dataFrame</a>[0] = 0x00; <span class="comment">// don&#39;t activate warning system</span></div>
<div class="line"><span class="lineno">  430</span>        aux.<a class="code hl_variable" href="structcan__msg.html#ae7f3f34abc69d7ee28fcd77a53091d54">dataFrame</a>[1] = 0x00; <span class="comment">// don&#39;t activate braking system</span></div>
<div class="line"><span class="lineno">  431</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  432</span>    <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno">  433</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  434</span>    }</div>
<div class="line"><span class="lineno">  435</span> </div>
<div class="line"><span class="lineno">  436</span>    <span class="keywordflow">return</span> aux;</div>
<div class="line"><span class="lineno">  437</span>}</div>
<div class="ttc" id="adbc_8h_html_a371988701ce573f2df413957182b8826"><div class="ttname"><a href="dbc_8h.html#a371988701ce573f2df413957182b8826">ID_AEB_S</a></div><div class="ttdeci">#define ID_AEB_S</div><div class="ttdef"><b>Definition</b> <a href="dbc_8h_source.html#l00026">dbc.h:26</a></div></div>
<div class="ttc" id="adbc_8h_html_af30056253fdd3a5987a1cab7062f7847"><div class="ttname"><a href="dbc_8h.html#af30056253fdd3a5987a1cab7062f7847">BASE_DATA_FRAME</a></div><div class="ttdeci">#define BASE_DATA_FRAME</div><div class="ttdef"><b>Definition</b> <a href="dbc_8h_source.html#l00030">dbc.h:30</a></div></div>
<div class="ttc" id="astructcan__msg_html"><div class="ttname"><a href="structcan__msg.html">can_msg</a></div><div class="ttdef"><b>Definition</b> <a href="dbc_8h_source.html#l00046">dbc.h:47</a></div></div>
<div class="ttc" id="astructcan__msg_html_ae7f3f34abc69d7ee28fcd77a53091d54"><div class="ttname"><a href="structcan__msg.html#ae7f3f34abc69d7ee28fcd77a53091d54">can_msg::dataFrame</a></div><div class="ttdeci">unsigned char dataFrame[8]</div><div class="ttdef"><b>Definition</b> <a href="dbc_8h_source.html#l00049">dbc.h:49</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0385dbe57c403b31fa857cced3197a0e" name="a0385dbe57c403b31fa857cced3197a0e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0385dbe57c403b31fa857cced3197a0e">&#9670;&#160;</a></span>updateInternalCarCState()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void updateInternalCarCState </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcan__msg.html">can_msg</a>&#160;</td>
          <td class="paramname"><em>captured_frame</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Updates the internal car state based on the received CAN message. </p>
<p>This function updates the status of the AEB system (on/off) based on the data in the CAN message.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">captured_frame</td><td>The captured CAN message containing car state data. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="aeb__controller_8c_source.html#l00387">387</a> of file <a class="el" href="aeb__controller_8c_source.html">aeb_controller.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  388</span>{</div>
<div class="line"><span class="lineno">  389</span>    <span class="keywordflow">if</span> (captured_frame.<a class="code hl_variable" href="structcan__msg.html#ae7f3f34abc69d7ee28fcd77a53091d54">dataFrame</a>[0] == 0x01)</div>
<div class="line"><span class="lineno">  390</span>    {</div>
<div class="line"><span class="lineno">  391</span>        <a class="code hl_variable" href="aeb__controller_8c.html#a15b2dc1261c867c309a53e7342596884">aeb_internal_state</a>.<a class="code hl_variable" href="structsensors__input__data.html#ae89dc450cae9cb5131b7c1eee277b71e">aeb_system_enabled</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  392</span>    }</div>
<div class="line"><span class="lineno">  393</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  394</span>    {</div>
<div class="line"><span class="lineno">  395</span>        <a class="code hl_variable" href="aeb__controller_8c.html#a15b2dc1261c867c309a53e7342596884">aeb_internal_state</a>.<a class="code hl_variable" href="structsensors__input__data.html#ae89dc450cae9cb5131b7c1eee277b71e">aeb_system_enabled</a> = <span class="keyword">false</span>; <span class="comment">// off state or invalid state</span></div>
<div class="line"><span class="lineno">  396</span>    }</div>
<div class="line"><span class="lineno">  397</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a6abe9c41325ac131ce28c7922cc509bf" name="a6abe9c41325ac131ce28c7922cc509bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6abe9c41325ac131ce28c7922cc509bf">&#9670;&#160;</a></span>updateInternalObstacleState()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void updateInternalObstacleState </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcan__msg.html">can_msg</a>&#160;</td>
          <td class="paramname"><em>captured_frame</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Updates the internal obstacle state based on the received CAN message. </p>
<p>This function updates whether an obstacle is detected and the distance to it based on the received CAN message.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">captured_frame</td><td>The captured CAN message containing obstacle data. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="aeb__controller_8c_source.html#l00337">337</a> of file <a class="el" href="aeb__controller_8c_source.html">aeb_controller.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  338</span>{</div>
<div class="line"><span class="lineno">  339</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> data_distance; <span class="comment">// used for can frame conversion</span></div>
<div class="line"><span class="lineno">  340</span>    <span class="keywordtype">double</span> new_internal_distance = 0.0;</div>
<div class="line"><span class="lineno">  341</span> </div>
<div class="line"><span class="lineno">  342</span>    <span class="comment">// Check if there is an obstacle</span></div>
<div class="line"><span class="lineno">  343</span>    <span class="keywordflow">if</span> (captured_frame.<a class="code hl_variable" href="structcan__msg.html#ae7f3f34abc69d7ee28fcd77a53091d54">dataFrame</a>[2] == 0x00)</div>
<div class="line"><span class="lineno">  344</span>    {</div>
<div class="line"><span class="lineno">  345</span>        <a class="code hl_variable" href="aeb__controller_8c.html#a15b2dc1261c867c309a53e7342596884">aeb_internal_state</a>.<a class="code hl_variable" href="structsensors__input__data.html#a3782de9b1037f3ce0036f685de31f165">has_obstacle</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  346</span>        <a class="code hl_variable" href="aeb__controller_8c.html#a15b2dc1261c867c309a53e7342596884">aeb_internal_state</a>.<a class="code hl_variable" href="structsensors__input__data.html#a01371737abb4472988490f1d011be0c9">obstacle_distance</a> = 300.0; <span class="comment">// Set max distance when no obstacle is detected</span></div>
<div class="line"><span class="lineno">  347</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  348</span>    }</div>
<div class="line"><span class="lineno">  349</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (captured_frame.<a class="code hl_variable" href="structcan__msg.html#ae7f3f34abc69d7ee28fcd77a53091d54">dataFrame</a>[2] == 0x01)</div>
<div class="line"><span class="lineno">  350</span>    {</div>
<div class="line"><span class="lineno">  351</span>        <a class="code hl_variable" href="aeb__controller_8c.html#a15b2dc1261c867c309a53e7342596884">aeb_internal_state</a>.<a class="code hl_variable" href="structsensors__input__data.html#a3782de9b1037f3ce0036f685de31f165">has_obstacle</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  352</span>    }</div>
<div class="line"><span class="lineno">  353</span> </div>
<div class="line"><span class="lineno">  354</span>    <span class="comment">// Handle special cases for clearing data or doing nothing</span></div>
<div class="line"><span class="lineno">  355</span>    <span class="keywordflow">if</span> (captured_frame.<a class="code hl_variable" href="structcan__msg.html#ae7f3f34abc69d7ee28fcd77a53091d54">dataFrame</a>[1] == 0xFF &amp;&amp; captured_frame.<a class="code hl_variable" href="structcan__msg.html#ae7f3f34abc69d7ee28fcd77a53091d54">dataFrame</a>[0] == 0xFE)</div>
<div class="line"><span class="lineno">  356</span>    {                                  <span class="comment">// DBC: Clear Data</span></div>
<div class="line"><span class="lineno">  357</span>        new_internal_distance = 300.0; <span class="comment">// Set to max distance</span></div>
<div class="line"><span class="lineno">  358</span>    }</div>
<div class="line"><span class="lineno">  359</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (captured_frame.<a class="code hl_variable" href="structcan__msg.html#ae7f3f34abc69d7ee28fcd77a53091d54">dataFrame</a>[1] == 0xFF &amp;&amp; captured_frame.<a class="code hl_variable" href="structcan__msg.html#ae7f3f34abc69d7ee28fcd77a53091d54">dataFrame</a>[0] == 0xFF)</div>
<div class="line"><span class="lineno">  360</span>    { <span class="comment">// DBC: Do nothing</span></div>
<div class="line"><span class="lineno">  361</span>        ;</div>
<div class="line"><span class="lineno">  362</span>    }</div>
<div class="line"><span class="lineno">  363</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  364</span>    {</div>
<div class="line"><span class="lineno">  365</span>        <span class="comment">// Conversion from CAN data frame, according to dbc in the requirement file</span></div>
<div class="line"><span class="lineno">  366</span>        data_distance = captured_frame.<a class="code hl_variable" href="structcan__msg.html#ae7f3f34abc69d7ee28fcd77a53091d54">dataFrame</a>[0] + (captured_frame.<a class="code hl_variable" href="structcan__msg.html#ae7f3f34abc69d7ee28fcd77a53091d54">dataFrame</a>[1] &lt;&lt; 8);</div>
<div class="line"><span class="lineno">  367</span>        new_internal_distance = data_distance * <a class="code hl_define" href="dbc_8h.html#ad208b54e7611f9e1696db6646f2b83a1">RES_OBSTACLE_S</a>;</div>
<div class="line"><span class="lineno">  368</span>    }</div>
<div class="line"><span class="lineno">  369</span> </div>
<div class="line"><span class="lineno">  370</span>    <span class="comment">// Apply the max distance constraint</span></div>
<div class="line"><span class="lineno">  371</span>    <span class="keywordflow">if</span> (new_internal_distance &gt; 300.0)</div>
<div class="line"><span class="lineno">  372</span>    { <span class="comment">// DBC: Max value constraint</span></div>
<div class="line"><span class="lineno">  373</span>        new_internal_distance = 300.0;</div>
<div class="line"><span class="lineno">  374</span>    }</div>
<div class="line"><span class="lineno">  375</span> </div>
<div class="line"><span class="lineno">  376</span>    <span class="comment">// Update internal state with calculated or reset distance</span></div>
<div class="line"><span class="lineno">  377</span>    <a class="code hl_variable" href="aeb__controller_8c.html#a15b2dc1261c867c309a53e7342596884">aeb_internal_state</a>.<a class="code hl_variable" href="structsensors__input__data.html#a01371737abb4472988490f1d011be0c9">obstacle_distance</a> = new_internal_distance;</div>
<div class="line"><span class="lineno">  378</span>}</div>
<div class="ttc" id="adbc_8h_html_ad208b54e7611f9e1696db6646f2b83a1"><div class="ttname"><a href="dbc_8h.html#ad208b54e7611f9e1696db6646f2b83a1">RES_OBSTACLE_S</a></div><div class="ttdeci">#define RES_OBSTACLE_S</div><div class="ttdef"><b>Definition</b> <a href="dbc_8h_source.html#l00038">dbc.h:38</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6ba2245e7d2117f6190d0687e1d9beb0" name="a6ba2245e7d2117f6190d0687e1d9beb0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6ba2245e7d2117f6190d0687e1d9beb0">&#9670;&#160;</a></span>updateInternalPedalsState()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void updateInternalPedalsState </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcan__msg.html">can_msg</a>&#160;</td>
          <td class="paramname"><em>captured_frame</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Updates the internal state for the brake and accelerator pedals from the received CAN message. </p>
<p>This function updates the brake and accelerator pedals' states based on the received CAN message.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">captured_frame</td><td>The captured CAN message containing pedal data. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="aeb__controller_8c_source.html#l00219">219</a> of file <a class="el" href="aeb__controller_8c_source.html">aeb_controller.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  220</span>{</div>
<div class="line"><span class="lineno">  221</span>    <span class="keywordflow">if</span> (captured_frame.<a class="code hl_variable" href="structcan__msg.html#ae7f3f34abc69d7ee28fcd77a53091d54">dataFrame</a>[0] == 0x00)</div>
<div class="line"><span class="lineno">  222</span>    {</div>
<div class="line"><span class="lineno">  223</span>        <a class="code hl_variable" href="aeb__controller_8c.html#a15b2dc1261c867c309a53e7342596884">aeb_internal_state</a>.<a class="code hl_variable" href="structsensors__input__data.html#a605d64229c3a536712761f44feb45251">accelerator_pedal</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  224</span>    }</div>
<div class="line"><span class="lineno">  225</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (captured_frame.<a class="code hl_variable" href="structcan__msg.html#ae7f3f34abc69d7ee28fcd77a53091d54">dataFrame</a>[0] == 0x01)</div>
<div class="line"><span class="lineno">  226</span>    {</div>
<div class="line"><span class="lineno">  227</span>        <a class="code hl_variable" href="aeb__controller_8c.html#a15b2dc1261c867c309a53e7342596884">aeb_internal_state</a>.<a class="code hl_variable" href="structsensors__input__data.html#a605d64229c3a536712761f44feb45251">accelerator_pedal</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  228</span>    }</div>
<div class="line"><span class="lineno">  229</span> </div>
<div class="line"><span class="lineno">  230</span>    <span class="keywordflow">if</span> (captured_frame.<a class="code hl_variable" href="structcan__msg.html#ae7f3f34abc69d7ee28fcd77a53091d54">dataFrame</a>[1] == 0x00)</div>
<div class="line"><span class="lineno">  231</span>    {</div>
<div class="line"><span class="lineno">  232</span>        <a class="code hl_variable" href="aeb__controller_8c.html#a15b2dc1261c867c309a53e7342596884">aeb_internal_state</a>.<a class="code hl_variable" href="structsensors__input__data.html#a8cc0d9e6c44c3b22ba0ad4e2e3f7d055">brake_pedal</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  233</span>    }</div>
<div class="line"><span class="lineno">  234</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (captured_frame.<a class="code hl_variable" href="structcan__msg.html#ae7f3f34abc69d7ee28fcd77a53091d54">dataFrame</a>[1] == 0x01)</div>
<div class="line"><span class="lineno">  235</span>    {</div>
<div class="line"><span class="lineno">  236</span>        <a class="code hl_variable" href="aeb__controller_8c.html#a15b2dc1261c867c309a53e7342596884">aeb_internal_state</a>.<a class="code hl_variable" href="structsensors__input__data.html#a8cc0d9e6c44c3b22ba0ad4e2e3f7d055">brake_pedal</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  237</span>    }</div>
<div class="line"><span class="lineno">  238</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ac1567ee14cae1132278047c889744010" name="ac1567ee14cae1132278047c889744010"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac1567ee14cae1132278047c889744010">&#9670;&#160;</a></span>updateInternalSpeedState()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void updateInternalSpeedState </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcan__msg.html">can_msg</a>&#160;</td>
          <td class="paramname"><em>captured_frame</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Updates the internal speed state based on the received CAN message. </p>
<p>This function updates the internal speed (relative velocity) from the received CAN message. [SwR-10] (Requirement SwR-10)</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">captured_frame</td><td>The captured CAN message containing speed data. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="aeb__controller_8c_source.html#l00248">248</a> of file <a class="el" href="aeb__controller_8c_source.html">aeb_controller.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  249</span>{</div>
<div class="line"><span class="lineno">  250</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> data_speed; <span class="comment">// used for can frame conversion</span></div>
<div class="line"><span class="lineno">  251</span>    <span class="keywordtype">double</span> new_internal_speed = 0.0;</div>
<div class="line"><span class="lineno">  252</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> data_acel; <span class="comment">// used for can frame conversion for acceleration</span></div>
<div class="line"><span class="lineno">  253</span>    <span class="keywordtype">double</span> new_internal_acel = 0.0;</div>
<div class="line"><span class="lineno">  254</span> </div>
<div class="line"><span class="lineno">  255</span>    <span class="comment">// update internal data according to the relative velocity detected by the sensor</span></div>
<div class="line"><span class="lineno">  256</span>    <span class="keywordflow">if</span> (captured_frame.<a class="code hl_variable" href="structcan__msg.html#ae7f3f34abc69d7ee28fcd77a53091d54">dataFrame</a>[0] == 0xFE &amp;&amp; captured_frame.<a class="code hl_variable" href="structcan__msg.html#ae7f3f34abc69d7ee28fcd77a53091d54">dataFrame</a>[1] == 0xFF)</div>
<div class="line"><span class="lineno">  257</span>    { <span class="comment">// DBC: Clear Data</span></div>
<div class="line"><span class="lineno">  258</span>        new_internal_speed = 0.0;</div>
<div class="line"><span class="lineno">  259</span>    }</div>
<div class="line"><span class="lineno">  260</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (captured_frame.<a class="code hl_variable" href="structcan__msg.html#ae7f3f34abc69d7ee28fcd77a53091d54">dataFrame</a>[0] == 0xFF &amp;&amp; captured_frame.<a class="code hl_variable" href="structcan__msg.html#ae7f3f34abc69d7ee28fcd77a53091d54">dataFrame</a>[1] == 0xFF)</div>
<div class="line"><span class="lineno">  261</span>    { <span class="comment">// DBC: Do nothing</span></div>
<div class="line"><span class="lineno">  262</span>        ;</div>
<div class="line"><span class="lineno">  263</span>    }</div>
<div class="line"><span class="lineno">  264</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  265</span>    {</div>
<div class="line"><span class="lineno">  266</span>        <span class="comment">// Conversion from CAN data frame, according to dbc in the requirement file</span></div>
<div class="line"><span class="lineno">  267</span>        <span class="comment">// [SwR-10]</span></div>
<div class="line"><span class="lineno">  268</span>        data_speed = captured_frame.<a class="code hl_variable" href="structcan__msg.html#ae7f3f34abc69d7ee28fcd77a53091d54">dataFrame</a>[0] + (captured_frame.<a class="code hl_variable" href="structcan__msg.html#ae7f3f34abc69d7ee28fcd77a53091d54">dataFrame</a>[1] &lt;&lt; 8);</div>
<div class="line"><span class="lineno">  269</span>        new_internal_speed = data_speed * <a class="code hl_define" href="dbc_8h.html#a646c6bfdb7d9573fc91d5d934d37ef43">RES_SPEED_S</a>;</div>
<div class="line"><span class="lineno">  270</span>    }</div>
<div class="line"><span class="lineno">  271</span> </div>
<div class="line"><span class="lineno">  272</span>    <span class="keywordflow">if</span> (new_internal_speed &gt; 251.0)</div>
<div class="line"><span class="lineno">  273</span>    { <span class="comment">// DBC: Max value constraint</span></div>
<div class="line"><span class="lineno">  274</span>        new_internal_speed = 251.0;</div>
<div class="line"><span class="lineno">  275</span>    }</div>
<div class="line"><span class="lineno">  276</span> </div>
<div class="line"><span class="lineno">  277</span>    <a class="code hl_variable" href="aeb__controller_8c.html#a15b2dc1261c867c309a53e7342596884">aeb_internal_state</a>.<a class="code hl_variable" href="structsensors__input__data.html#a446e6e46ec0541ab0b404d93a75ab6ac">relative_velocity</a> = new_internal_speed;</div>
<div class="line"><span class="lineno">  278</span> </div>
<div class="line"><span class="lineno">  279</span>    <span class="comment">// update internal data according to the movement direction reported by the sensor</span></div>
<div class="line"><span class="lineno">  280</span>    <span class="keywordflow">if</span> (captured_frame.<a class="code hl_variable" href="structcan__msg.html#ae7f3f34abc69d7ee28fcd77a53091d54">dataFrame</a>[2] == 0x01)</div>
<div class="line"><span class="lineno">  281</span>    {</div>
<div class="line"><span class="lineno">  282</span>        <a class="code hl_variable" href="aeb__controller_8c.html#a15b2dc1261c867c309a53e7342596884">aeb_internal_state</a>.<a class="code hl_variable" href="structsensors__input__data.html#a9ec0cda0acd16fae666aca69cb7938ac">reverse_enabled</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  283</span>    }</div>
<div class="line"><span class="lineno">  284</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  285</span>    {</div>
<div class="line"><span class="lineno">  286</span>        <a class="code hl_variable" href="aeb__controller_8c.html#a15b2dc1261c867c309a53e7342596884">aeb_internal_state</a>.<a class="code hl_variable" href="structsensors__input__data.html#a9ec0cda0acd16fae666aca69cb7938ac">reverse_enabled</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  287</span>    }</div>
<div class="line"><span class="lineno">  288</span> </div>
<div class="line"><span class="lineno">  289</span>    <span class="comment">// update internal data according to the relative acceleration detected by the sensor</span></div>
<div class="line"><span class="lineno">  290</span>    <span class="keywordflow">if</span> (captured_frame.<a class="code hl_variable" href="structcan__msg.html#ae7f3f34abc69d7ee28fcd77a53091d54">dataFrame</a>[3] == 0xFE &amp;&amp; captured_frame.<a class="code hl_variable" href="structcan__msg.html#ae7f3f34abc69d7ee28fcd77a53091d54">dataFrame</a>[4] == 0xFF)</div>
<div class="line"><span class="lineno">  291</span>    { <span class="comment">// DBC: Clear Data</span></div>
<div class="line"><span class="lineno">  292</span>        new_internal_acel = 0.0;</div>
<div class="line"><span class="lineno">  293</span>    }</div>
<div class="line"><span class="lineno">  294</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (captured_frame.<a class="code hl_variable" href="structcan__msg.html#ae7f3f34abc69d7ee28fcd77a53091d54">dataFrame</a>[3] == 0xFF &amp;&amp; captured_frame.<a class="code hl_variable" href="structcan__msg.html#ae7f3f34abc69d7ee28fcd77a53091d54">dataFrame</a>[4] == 0xFF)</div>
<div class="line"><span class="lineno">  295</span>    { <span class="comment">// DBC: Do nothing</span></div>
<div class="line"><span class="lineno">  296</span>        ;</div>
<div class="line"><span class="lineno">  297</span>    }</div>
<div class="line"><span class="lineno">  298</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  299</span>    {</div>
<div class="line"><span class="lineno">  300</span>        <span class="comment">// Conversion from CAN data frame, according to dbc in the requirement file</span></div>
<div class="line"><span class="lineno">  301</span>        <span class="comment">// [SwR-10]</span></div>
<div class="line"><span class="lineno">  302</span>        data_acel = captured_frame.<a class="code hl_variable" href="structcan__msg.html#ae7f3f34abc69d7ee28fcd77a53091d54">dataFrame</a>[3] + (captured_frame.<a class="code hl_variable" href="structcan__msg.html#ae7f3f34abc69d7ee28fcd77a53091d54">dataFrame</a>[4] &lt;&lt; 8);</div>
<div class="line"><span class="lineno">  303</span>        new_internal_acel = (data_acel + <a class="code hl_define" href="dbc_8h.html#a6e352da7481d147cdd83581ea8f8dbb9">OFFSET_ACCELERATION_S</a>) * <a class="code hl_define" href="dbc_8h.html#a5eff1a9687fa5bffca0f3fd845904782">RES_ACCELERATION_S</a>;</div>
<div class="line"><span class="lineno">  304</span>    }</div>
<div class="line"><span class="lineno">  305</span> </div>
<div class="line"><span class="lineno">  306</span>    <span class="keywordflow">if</span> (captured_frame.<a class="code hl_variable" href="structcan__msg.html#ae7f3f34abc69d7ee28fcd77a53091d54">dataFrame</a>[5] == 0x01)</div>
<div class="line"><span class="lineno">  307</span>    {</div>
<div class="line"><span class="lineno">  308</span>        new_internal_acel *= -1;</div>
<div class="line"><span class="lineno">  309</span>    }</div>
<div class="line"><span class="lineno">  310</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  311</span>    {</div>
<div class="line"><span class="lineno">  312</span>        ;</div>
<div class="line"><span class="lineno">  313</span>    }</div>
<div class="line"><span class="lineno">  314</span> </div>
<div class="line"><span class="lineno">  315</span>    <span class="keywordflow">if</span> (new_internal_acel &gt; <a class="code hl_define" href="dbc_8h.html#a87a12837cc18d05d01e84f339fa0c2b0">MAX_ACCELERATION_S</a>)</div>
<div class="line"><span class="lineno">  316</span>    { <span class="comment">// DBC: Max value constraint</span></div>
<div class="line"><span class="lineno">  317</span>        new_internal_acel = <a class="code hl_define" href="dbc_8h.html#a87a12837cc18d05d01e84f339fa0c2b0">MAX_ACCELERATION_S</a>;</div>
<div class="line"><span class="lineno">  318</span>    }</div>
<div class="line"><span class="lineno">  319</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (new_internal_acel &lt; <a class="code hl_define" href="dbc_8h.html#aa44de3c36739ea779d9f4d61414ccc74">MIN_ACCELERATION_S</a>)</div>
<div class="line"><span class="lineno">  320</span>    {</div>
<div class="line"><span class="lineno">  321</span>        <span class="comment">// DBC: Min value constraint</span></div>
<div class="line"><span class="lineno">  322</span>        new_internal_acel = <a class="code hl_define" href="dbc_8h.html#aa44de3c36739ea779d9f4d61414ccc74">MIN_ACCELERATION_S</a>;</div>
<div class="line"><span class="lineno">  323</span>    }</div>
<div class="line"><span class="lineno">  324</span> </div>
<div class="line"><span class="lineno">  325</span>    <a class="code hl_variable" href="aeb__controller_8c.html#a15b2dc1261c867c309a53e7342596884">aeb_internal_state</a>.<a class="code hl_variable" href="structsensors__input__data.html#a6d9d7c897f6485d71742ef8166991c22">relative_acceleration</a> = new_internal_acel;</div>
<div class="line"><span class="lineno">  326</span> </div>
<div class="line"><span class="lineno">  327</span>    <span class="comment">// printf(&quot;acel is: %.3lf\n&quot;, aeb_internal_state.relative_acceleration);</span></div>
<div class="line"><span class="lineno">  328</span>}</div>
<div class="ttc" id="adbc_8h_html_a5eff1a9687fa5bffca0f3fd845904782"><div class="ttname"><a href="dbc_8h.html#a5eff1a9687fa5bffca0f3fd845904782">RES_ACCELERATION_S</a></div><div class="ttdeci">#define RES_ACCELERATION_S</div><div class="ttdef"><b>Definition</b> <a href="dbc_8h_source.html#l00039">dbc.h:39</a></div></div>
<div class="ttc" id="adbc_8h_html_a646c6bfdb7d9573fc91d5d934d37ef43"><div class="ttname"><a href="dbc_8h.html#a646c6bfdb7d9573fc91d5d934d37ef43">RES_SPEED_S</a></div><div class="ttdeci">#define RES_SPEED_S</div><div class="ttdef"><b>Definition</b> <a href="dbc_8h_source.html#l00037">dbc.h:37</a></div></div>
<div class="ttc" id="adbc_8h_html_a6e352da7481d147cdd83581ea8f8dbb9"><div class="ttname"><a href="dbc_8h.html#a6e352da7481d147cdd83581ea8f8dbb9">OFFSET_ACCELERATION_S</a></div><div class="ttdeci">#define OFFSET_ACCELERATION_S</div><div class="ttdef"><b>Definition</b> <a href="dbc_8h_source.html#l00043">dbc.h:43</a></div></div>
<div class="ttc" id="adbc_8h_html_a87a12837cc18d05d01e84f339fa0c2b0"><div class="ttname"><a href="dbc_8h.html#a87a12837cc18d05d01e84f339fa0c2b0">MAX_ACCELERATION_S</a></div><div class="ttdeci">#define MAX_ACCELERATION_S</div><div class="ttdef"><b>Definition</b> <a href="dbc_8h_source.html#l00034">dbc.h:34</a></div></div>
<div class="ttc" id="adbc_8h_html_aa44de3c36739ea779d9f4d61414ccc74"><div class="ttname"><a href="dbc_8h.html#aa44de3c36739ea779d9f4d61414ccc74">MIN_ACCELERATION_S</a></div><div class="ttdeci">#define MIN_ACCELERATION_S</div><div class="ttdef"><b>Definition</b> <a href="dbc_8h_source.html#l00035">dbc.h:35</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a888ff70e2de4c8fbaedc5134dbe2a441" name="a888ff70e2de4c8fbaedc5134dbe2a441"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a888ff70e2de4c8fbaedc5134dbe2a441">&#9670;&#160;</a></span>actuators_mq</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">mqd_t actuators_mq</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Message queues for sensors and actuators </p>

<p class="definition">Definition at line <a class="el" href="aeb__controller_8c_source.html#l00056">56</a> of file <a class="el" href="aeb__controller_8c_source.html">aeb_controller.c</a>.</p>

</div>
</div>
<a id="a31be80dc3d658ca7ba3be24962aed6d4" name="a31be80dc3d658ca7ba3be24962aed6d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a31be80dc3d658ca7ba3be24962aed6d4">&#9670;&#160;</a></span>aeb_controller_id</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pthread_t aeb_controller_id</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Thread ID for the AEB controller </p>

<p class="definition">Definition at line <a class="el" href="aeb__controller_8c_source.html#l00057">57</a> of file <a class="el" href="aeb__controller_8c_source.html">aeb_controller.c</a>.</p>

</div>
</div>
<a id="a15b2dc1261c867c309a53e7342596884" name="a15b2dc1261c867c309a53e7342596884"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a15b2dc1261c867c309a53e7342596884">&#9670;&#160;</a></span>aeb_internal_state</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structsensors__input__data.html">sensors_input_data</a> aeb_internal_state</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div>
<div class="line">    .relative_velocity = 0.0,</div>
<div class="line">    .has_obstacle = <span class="keyword">false</span>,</div>
<div class="line">    .obstacle_distance = 0.0,</div>
<div class="line">    .brake_pedal = <span class="keyword">false</span>,</div>
<div class="line">    .accelerator_pedal = <span class="keyword">false</span>,</div>
<div class="line">    .aeb_system_enabled = <span class="keyword">true</span>,</div>
<div class="line">    .reverse_enabled = <span class="keyword">false</span>,</div>
<div class="line">    .relative_acceleration = 0.0}</div>
</div><!-- fragment --><p>External declaration of global variables Internal AEB system state data </p>

<p class="definition">Definition at line <a class="el" href="aeb__controller_8c_source.html#l00059">59</a> of file <a class="el" href="aeb__controller_8c_source.html">aeb_controller.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   59</span>                                        {</div>
<div class="line"><span class="lineno">   60</span>    .relative_velocity = 0.0,</div>
<div class="line"><span class="lineno">   61</span>    .has_obstacle = <span class="keyword">false</span>,</div>
<div class="line"><span class="lineno">   62</span>    .obstacle_distance = 0.0,</div>
<div class="line"><span class="lineno">   63</span>    .brake_pedal = <span class="keyword">false</span>,</div>
<div class="line"><span class="lineno">   64</span>    .accelerator_pedal = <span class="keyword">false</span>,</div>
<div class="line"><span class="lineno">   65</span>    .aeb_system_enabled = <span class="keyword">true</span>,</div>
<div class="line"><span class="lineno">   66</span>    .reverse_enabled = <span class="keyword">false</span>,</div>
<div class="line"><span class="lineno">   67</span>    .relative_acceleration = 0.0};</div>
</div><!-- fragment -->
</div>
</div>
<a id="a5d2051893d3d3ea4e0dcc3c647770c95" name="a5d2051893d3d3ea4e0dcc3c647770c95"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5d2051893d3d3ea4e0dcc3c647770c95">&#9670;&#160;</a></span>captured_can_frame</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structcan__msg.html">can_msg</a> captured_can_frame</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div>
<div class="line">    .identifier = <a class="code hl_define" href="dbc_8h.html#aed7b961aae1393ad39496b0d847580d7">ID_CAR_C</a>,</div>
<div class="line">    .dataFrame = {0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF}}</div>
</div><!-- fragment --><p>Captured CAN message </p>

<p class="definition">Definition at line <a class="el" href="aeb__controller_8c_source.html#l00069">69</a> of file <a class="el" href="aeb__controller_8c_source.html">aeb_controller.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   69</span>                             {</div>
<div class="line"><span class="lineno">   70</span>    .identifier = <a class="code hl_define" href="dbc_8h.html#aed7b961aae1393ad39496b0d847580d7">ID_CAR_C</a>,</div>
<div class="line"><span class="lineno">   71</span>    .dataFrame = {0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF}};</div>
</div><!-- fragment -->
</div>
</div>
<a id="ae6763c5f7a5772f4680437dee47e8954" name="ae6763c5f7a5772f4680437dee47e8954"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae6763c5f7a5772f4680437dee47e8954">&#9670;&#160;</a></span>empty_msg</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structcan__msg.html">can_msg</a> empty_msg</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= { </div>
<div class="line">    .identifier = <a class="code hl_define" href="dbc_8h.html#aae29e3539bd594d7ade539814febe97b">ID_EMPTY</a>,</div>
<div class="line">    .dataFrame = {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}}</div>
<div class="ttc" id="adbc_8h_html_aae29e3539bd594d7ade539814febe97b"><div class="ttname"><a href="dbc_8h.html#aae29e3539bd594d7ade539814febe97b">ID_EMPTY</a></div><div class="ttdeci">#define ID_EMPTY</div><div class="ttdef"><b>Definition</b> <a href="dbc_8h_source.html#l00027">dbc.h:27</a></div></div>
</div><!-- fragment -->
<p>[SwR-5] (<a class="el" href="software_requirements.html#SwR-5">SwR-5</a>) </p>
<p>Empty CAN message </p>

<p class="definition">Definition at line <a class="el" href="aeb__controller_8c_source.html#l00078">78</a> of file <a class="el" href="aeb__controller_8c_source.html">aeb_controller.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   78</span>                    { <span class="comment">// [SwR-5]</span></div>
<div class="line"><span class="lineno">   79</span>    .identifier = <a class="code hl_define" href="dbc_8h.html#aae29e3539bd594d7ade539814febe97b">ID_EMPTY</a>,</div>
<div class="line"><span class="lineno">   80</span>    .dataFrame = {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}};</div>
</div><!-- fragment -->
</div>
</div>
<a id="a4847c169e96fc59553ca7c852cc004d6" name="a4847c169e96fc59553ca7c852cc004d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4847c169e96fc59553ca7c852cc004d6">&#9670;&#160;</a></span>out_can_frame</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structcan__msg.html">can_msg</a> out_can_frame</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div>
<div class="line">    .identifier = <a class="code hl_define" href="dbc_8h.html#a371988701ce573f2df413957182b8826">ID_AEB_S</a>,</div>
<div class="line">    .dataFrame = {0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF}}</div>
</div><!-- fragment --><p>Output CAN message </p>

<p class="definition">Definition at line <a class="el" href="aeb__controller_8c_source.html#l00073">73</a> of file <a class="el" href="aeb__controller_8c_source.html">aeb_controller.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   73</span>                        {</div>
<div class="line"><span class="lineno">   74</span>    .identifier = <a class="code hl_define" href="dbc_8h.html#a371988701ce573f2df413957182b8826">ID_AEB_S</a>,</div>
<div class="line"><span class="lineno">   75</span>    .dataFrame = {0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF}};</div>
</div><!-- fragment -->
</div>
</div>
<a id="a074b0ef9bc31934bbf9b2b54e9e9aa43" name="a074b0ef9bc31934bbf9b2b54e9e9aa43"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a074b0ef9bc31934bbf9b2b54e9e9aa43">&#9670;&#160;</a></span>sensors_mq</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">mqd_t sensors_mq</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="aeb__controller_8c_source.html#l00056">56</a> of file <a class="el" href="aeb__controller_8c_source.html">aeb_controller.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
